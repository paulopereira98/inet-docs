<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>INET Framework for OMNeT++/OMNEST: inet::tcp::TcpLwipSendQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="opp.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classinet_1_1tcp_1_1_tcp_lwip_send_queue.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classinet_1_1tcp_1_1_tcp_lwip_send_queue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">inet::tcp::TcpLwipSendQueue Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip.html" title="Module for using the LwIP TCP stack.">TcpLwip</a> send queue.  
 <a href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#details">More...</a></p>

<p><code>#include &lt;TcpLwipQueues.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for inet::tcp::TcpLwipSendQueue:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classinet_1_1tcp_1_1_tcp_lwip_send_queue.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a51611f3c31d4bf28e8ae8c8583e14db4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a51611f3c31d4bf28e8ae8c8583e14db4">TcpLwipSendQueue</a> ()</td></tr>
<tr class="separator:a51611f3c31d4bf28e8ae8c8583e14db4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbe4de239248506f847e44ab14efd62d"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#acbe4de239248506f847e44ab14efd62d">~TcpLwipSendQueue</a> ()</td></tr>
<tr class="separator:acbe4de239248506f847e44ab14efd62d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32fff7b1c061f22023308235c72e3ac6"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a32fff7b1c061f22023308235c72e3ac6">setConnection</a> (<a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_connection.html">TcpLwipConnection</a> *connP)</td></tr>
<tr class="memdesc:a32fff7b1c061f22023308235c72e3ac6"><td class="mdescLeft">&#160;</td><td class="mdescRight">set connection queue, and initialise queue variables.  <a href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a32fff7b1c061f22023308235c72e3ac6">More...</a><br /></td></tr>
<tr class="separator:a32fff7b1c061f22023308235c72e3ac6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0512f8adfe7a5b745bc4071f946e9c19"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a0512f8adfe7a5b745bc4071f946e9c19">enqueueAppData</a> (<a class="el" href="classinet_1_1_packet.html">Packet</a> *msgP)</td></tr>
<tr class="memdesc:a0512f8adfe7a5b745bc4071f946e9c19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called on SEND app command, it inserts in the queue the data the user wants to send.  <a href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a0512f8adfe7a5b745bc4071f946e9c19">More...</a><br /></td></tr>
<tr class="separator:a0512f8adfe7a5b745bc4071f946e9c19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e68a62d80c6e8082bfd76bc3b5737a9"><td class="memItemLeft" align="right" valign="top">virtual unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a4e68a62d80c6e8082bfd76bc3b5737a9">getBytesForTcpLayer</a> (void *bufferP, unsigned int bufferLengthP) const</td></tr>
<tr class="memdesc:a4e68a62d80c6e8082bfd76bc3b5737a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy data to the buffer for send to LWIP.  <a href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a4e68a62d80c6e8082bfd76bc3b5737a9">More...</a><br /></td></tr>
<tr class="separator:a4e68a62d80c6e8082bfd76bc3b5737a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62527346f012f27e8230f8e2512a252c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a62527346f012f27e8230f8e2512a252c">dequeueTcpLayerMsg</a> (unsigned int msgLengthP)</td></tr>
<tr class="memdesc:a62527346f012f27e8230f8e2512a252c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function should remove msgLengthP bytes from TCP layer queue.  <a href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a62527346f012f27e8230f8e2512a252c">More...</a><br /></td></tr>
<tr class="separator:a62527346f012f27e8230f8e2512a252c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bf2c354e045e13aa7f29c797b72f6f7"><td class="memItemLeft" align="right" valign="top">virtual unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a0bf2c354e045e13aa7f29c797b72f6f7">getBytesAvailable</a> () const</td></tr>
<tr class="memdesc:a0bf2c354e045e13aa7f29c797b72f6f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility function: returns how many bytes are available in the queue.  <a href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a0bf2c354e045e13aa7f29c797b72f6f7">More...</a><br /></td></tr>
<tr class="separator:a0bf2c354e045e13aa7f29c797b72f6f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4070c1a04717674641cd945cb6f1420"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classinet_1_1_packet.html">Packet</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#aa4070c1a04717674641cd945cb6f1420">createSegmentWithBytes</a> (const void *tcpDataP, unsigned int tcpLengthP)</td></tr>
<tr class="memdesc:aa4070c1a04717674641cd945cb6f1420"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the TCP wants to send or retransmit data, it constructs a TCP segment which contains the data from the requested sequence number range.  <a href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#aa4070c1a04717674641cd945cb6f1420">More...</a><br /></td></tr>
<tr class="separator:aa4070c1a04717674641cd945cb6f1420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a414362cebc5da6a6eadba8c1dbaa80f9"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a414362cebc5da6a6eadba8c1dbaa80f9">discardAckedBytes</a> (unsigned long bytesP)</td></tr>
<tr class="separator:a414362cebc5da6a6eadba8c1dbaa80f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a5e747d1a7062804032b2cda5c47f64b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_connection.html">TcpLwipConnection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a5e747d1a7062804032b2cda5c47f64b9">connM</a> = nullptr</td></tr>
<tr class="separator:a5e747d1a7062804032b2cda5c47f64b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3b32e1185c29d4402ef3e5c82304017"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinet_1_1_chunk_queue.html">ChunkQueue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#ad3b32e1185c29d4402ef3e5c82304017">dataBuffer</a></td></tr>
<tr class="separator:ad3b32e1185c29d4402ef3e5c82304017"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip.html" title="Module for using the LwIP TCP stack.">TcpLwip</a> send queue. </p>
<p>In fact a single object represents both the send queue and the retransmission queue (no need to separate them). The <a class="el" href="classinet_1_1tcp_1_1_tcp_connection.html" title="Manages a TCP connection.">TcpConnection</a> object knows which data in the queue have already been transmitted ("retransmission
queue") and which not ("send queue"). This class is not interested in where's the boundary.</p>
<p>There is another particularity about this class: as a retransmission queue, it stores bytes and not segments. TCP is a bytestream oriented protocol (sequence numbers refer to bytes and not to TPDUs as e.g. in ISO TP4), and the protocol doesn't rely on retransmitted segments having the same segment boundaries as the original segments. Some implementations store segments on the retransmission queue, and others store only the data bytes; RFCs explicitly allow both. (See e.g. RFC1122 p90, section 4.2.2.15, "IMPLEMENTATION" note).</p>
<p>To simulate a TCP that retains segment boundaries in retransmissions, the appropriate <a class="el" href="classinet_1_1tcp_1_1_tcp_algorithm.html" title="Abstract base class for TCP algorithms which encapsulate all behaviour during data transfer state: fl...">TcpAlgorithm</a> class should remember where the segment boundaries were at the original transmission, and it should form identical segments when retransmitting. The <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#aa4070c1a04717674641cd945cb6f1420" title="Called when the TCP wants to send or retransmit data, it constructs a TCP segment which contains the ...">createSegmentWithBytes()</a> send queue method makes this possible.</p>
<p>This class is polymorphic because depending on where and how you use the TCP model you might have different ideas about "sending data" on a simulated connection.</p>
<p>You might want to:</p>
<ul>
<li>transmit a real bytes, especially if the application which uses TCP is a ported version of a real socket application.</li>
<li>simulate a "dummy" connection, that is, simulated TCP segments contain do not contain any real data, only the number of bytes they represent. You'll want to do this when the app is there solely as a traffic generator (e.g. simulated file transfer or telnet session), but actual data is unimportant.</li>
<li>transmit a sequence of cMessage objects, and you want exactly the same cMessage sequence to be reproduced on the receiver side. Here every cMessage maps to a sequence number range in the TCP stream, and the object is passed up to the application on the receiving side when its last byte has arrived on the simulated connection.</li>
</ul>
<p>Different <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html" title="TcpLwip send queue.">TcpLwipSendQueue</a> subclasses can be written to accomodate different needs.</p>
<p>This class goes hand-in-hand with <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_receive_queue.html" title="TcpLwip receive queue.">TcpLwipReceiveQueue</a>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_receive_queue.html" title="TcpLwip receive queue.">TcpLwipReceiveQueue</a> </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a51611f3c31d4bf28e8ae8c8583e14db4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51611f3c31d4bf28e8ae8c8583e14db4">&#9670;&nbsp;</a></span>TcpLwipSendQueue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">inet::tcp::TcpLwipSendQueue::TcpLwipSendQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="acbe4de239248506f847e44ab14efd62d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbe4de239248506f847e44ab14efd62d">&#9670;&nbsp;</a></span>~TcpLwipSendQueue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">inet::tcp::TcpLwipSendQueue::~TcpLwipSendQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;{</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa4070c1a04717674641cd945cb6f1420"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4070c1a04717674641cd945cb6f1420">&#9670;&nbsp;</a></span>createSegmentWithBytes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinet_1_1_packet.html">Packet</a> * inet::tcp::TcpLwipSendQueue::createSegmentWithBytes </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>tcpDataP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>tcpLengthP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called when the TCP wants to send or retransmit data, it constructs a TCP segment which contains the data from the requested sequence number range. </p>
<p>The actually returned segment may contain less then maxNumBytes bytes if the subclass wants to reproduce the original segment boundaries when retransmitting.</p>
<p>called from inside of send_callback() called before called the send() to IP layer </p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;{</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    ASSERT(tcpDataP);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; bytes = makeShared&lt;BytesChunk&gt;((<span class="keyword">const</span> uint8_t *)tcpDataP, tcpLengthP);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keyword">auto</span> packet = <span class="keyword">new</span> Packet(<span class="keyword">nullptr</span>, bytes);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keyword">auto</span> tcpHdr = packet-&gt;removeAtFront&lt;TcpHeader&gt;();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    int64_t numBytes = packet-&gt;getByteLength();</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    packet-&gt;insertAtFront(tcpHdr);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">//    auto payload = makeShared&lt;BytesChunk&gt;((const uint8_t*)tcpDataP, tcpLengthP);</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">//    const auto&amp; tcpHdr = payload-&gt;Chunk::peek&lt;TcpHeader&gt;(byte(0));</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">//    payload-&gt;removeFromBeginning(tcpHdr-&gt;getChunkLength());</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordtype">char</span> msgname[80];</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    sprintf(msgname, <span class="stringliteral">&quot;%.10s%s%s%s(l=%lu bytes)&quot;</span>,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="stringliteral">&quot;tcpHdr&quot;</span>,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            tcpHdr-&gt;getSynBit() ? <span class="stringliteral">&quot; SYN&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            tcpHdr-&gt;getFinBit() ? <span class="stringliteral">&quot; FIN&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            (tcpHdr-&gt;getAckBit() &amp;&amp; 0 == numBytes) ? <span class="stringliteral">&quot; ACK&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)numBytes);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> packet;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip.html#a8fa83e07566e3db689506b677d640eb7">inet::tcp::TcpLwip::ip_output()</a>.</p>

</div>
</div>
<a id="a62527346f012f27e8230f8e2512a252c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62527346f012f27e8230f8e2512a252c">&#9670;&nbsp;</a></span>dequeueTcpLayerMsg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::tcp::TcpLwipSendQueue::dequeueTcpLayerMsg </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>msgLengthP</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function should remove msgLengthP bytes from TCP layer queue. </p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#ad3b32e1185c29d4402ef3e5c82304017">dataBuffer</a>.<a class="code" href="classinet_1_1_chunk_queue.html#a7d31258285b9a997d5fb7024dc2d23c7">pop</a>(<a class="code" href="namespaceinet_1_1units_1_1units.html#af52f6a778cd03659324d02848f8aaa33">B</a>(msgLengthP));</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_connection.html#ab8b46b3ebded2f0e605b3ae519c495e8">inet::tcp::TcpLwipConnection::do_SEND()</a>.</p>

</div>
</div>
<a id="a414362cebc5da6a6eadba8c1dbaa80f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a414362cebc5da6a6eadba8c1dbaa80f9">&#9670;&nbsp;</a></span>discardAckedBytes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::tcp::TcpLwipSendQueue::discardAckedBytes </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>bytesP</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">// nothing to do here</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0512f8adfe7a5b745bc4071f946e9c19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0512f8adfe7a5b745bc4071f946e9c19">&#9670;&nbsp;</a></span>enqueueAppData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::tcp::TcpLwipSendQueue::enqueueAppData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinet_1_1_packet.html">Packet</a> *&#160;</td>
          <td class="paramname"><em>msgP</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called on SEND app command, it inserts in the queue the data the user wants to send. </p>
<p>Implementations of this abstract class will decide what this means: copying actual bytes, just increasing the "last byte queued" variable, or storing cMessage object(s). The msg object should not be referenced after this point (sendQueue may delete it.) </p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;{</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    ASSERT(msg);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#ad3b32e1185c29d4402ef3e5c82304017">dataBuffer</a>.<a class="code" href="classinet_1_1_chunk_queue.html#a4a8469ee28aeb63b2a1e504fd5625efb">push</a>(msg-&gt;peekDataAt(<a class="code" href="namespaceinet_1_1units_1_1units.html#af52f6a778cd03659324d02848f8aaa33">B</a>(0), <a class="code" href="namespaceinet_1_1units_1_1units.html#af52f6a778cd03659324d02848f8aaa33">B</a>(msg-&gt;getByteLength())));</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keyword">delete</span> msg;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_connection.html#ae330529220aba809a46ff271c73396ee">inet::tcp::TcpLwipConnection::send()</a>.</p>

</div>
</div>
<a id="a0bf2c354e045e13aa7f29c797b72f6f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bf2c354e045e13aa7f29c797b72f6f7">&#9670;&nbsp;</a></span>getBytesAvailable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long inet::tcp::TcpLwipSendQueue::getBytesAvailable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Utility function: returns how many bytes are available in the queue. </p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceinet_1_1units_1_1units.html#af52f6a778cd03659324d02848f8aaa33">B</a>(<a class="code" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#ad3b32e1185c29d4402ef3e5c82304017">dataBuffer</a>.<a class="code" href="classinet_1_1_chunk_queue.html#aba640a0613a2ce8e1df723f147680356">getLength</a>()).get();</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_connection.html#afdcbbe8f6d504c92f494db1a2c3be296">inet::tcp::TcpLwipConnection::close()</a>, and <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_connection.html#ab8b46b3ebded2f0e605b3ae519c495e8">inet::tcp::TcpLwipConnection::do_SEND()</a>.</p>

</div>
</div>
<a id="a4e68a62d80c6e8082bfd76bc3b5737a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e68a62d80c6e8082bfd76bc3b5737a9">&#9670;&nbsp;</a></span>getBytesForTcpLayer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int inet::tcp::TcpLwipSendQueue::getBytesForTcpLayer </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bufferP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>bufferLengthP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy data to the buffer for send to LWIP. </p>
<p>returns lengh of copied data. create msg for socket-&gt;send_data()</p>
<p>called before called socket-&gt;send_data() </p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    ASSERT(bufferP);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> length = <a class="code" href="namespaceinet_1_1units_1_1units.html#af52f6a778cd03659324d02848f8aaa33">B</a>(<a class="code" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#ad3b32e1185c29d4402ef3e5c82304017">dataBuffer</a>.<a class="code" href="classinet_1_1_chunk_queue.html#aba640a0613a2ce8e1df723f147680356">getLength</a>()).get();</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">if</span> (bufferLengthP &lt; length)</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        length = bufferLengthP;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">if</span> (length == 0)</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; bytesChunk = <a class="code" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#ad3b32e1185c29d4402ef3e5c82304017">dataBuffer</a>.<a class="code" href="classinet_1_1_chunk_queue.html#a13d26c716289c5a3b849f5a5236c8369">peek</a>&lt;BytesChunk&gt;(<a class="code" href="namespaceinet_1_1units_1_1units.html#af52f6a778cd03659324d02848f8aaa33">B</a>(length));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">return</span> bytesChunk-&gt;copyToBuffer(<span class="keyword">static_cast&lt;</span>uint8_t *<span class="keyword">&gt;</span>(bufferP), length);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_connection.html#ab8b46b3ebded2f0e605b3ae519c495e8">inet::tcp::TcpLwipConnection::do_SEND()</a>.</p>

</div>
</div>
<a id="a32fff7b1c061f22023308235c72e3ac6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32fff7b1c061f22023308235c72e3ac6">&#9670;&nbsp;</a></span>setConnection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::tcp::TcpLwipSendQueue::setConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_connection.html">TcpLwipConnection</a> *&#160;</td>
          <td class="paramname"><em>connP</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set connection queue, and initialise queue variables. </p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;{</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#ad3b32e1185c29d4402ef3e5c82304017">dataBuffer</a>.<a class="code" href="classinet_1_1_chunk_queue.html#a7efe9fa3288aa386b5a9014bbf9c2005">clear</a>();</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a5e747d1a7062804032b2cda5c47f64b9">connM</a> = connP;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_connection.html#aa9e75b11d53a1fc0331b0e10b22cf4e1">inet::tcp::TcpLwipConnection::initConnection()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5e747d1a7062804032b2cda5c47f64b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e747d1a7062804032b2cda5c47f64b9">&#9670;&nbsp;</a></span>connM</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_connection.html">TcpLwipConnection</a>* inet::tcp::TcpLwipSendQueue::connM = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a32fff7b1c061f22023308235c72e3ac6">setConnection()</a>.</p>

</div>
</div>
<a id="ad3b32e1185c29d4402ef3e5c82304017"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3b32e1185c29d4402ef3e5c82304017">&#9670;&nbsp;</a></span>dataBuffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinet_1_1_chunk_queue.html">ChunkQueue</a> inet::tcp::TcpLwipSendQueue::dataBuffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a62527346f012f27e8230f8e2512a252c">dequeueTcpLayerMsg()</a>, <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a0512f8adfe7a5b745bc4071f946e9c19">enqueueAppData()</a>, <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a0bf2c354e045e13aa7f29c797b72f6f7">getBytesAvailable()</a>, <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a4e68a62d80c6e8082bfd76bc3b5737a9">getBytesForTcpLayer()</a>, and <a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a32fff7b1c061f22023308235c72e3ac6">setConnection()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_tcp_lwip_queues_8h.html">TcpLwipQueues.h</a></li>
<li><a class="el" href="_tcp_lwip_queues_8cc.html">TcpLwipQueues.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclassinet_1_1tcp_1_1_tcp_lwip_send_queue_html_a5e747d1a7062804032b2cda5c47f64b9"><div class="ttname"><a href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#a5e747d1a7062804032b2cda5c47f64b9">inet::tcp::TcpLwipSendQueue::connM</a></div><div class="ttdeci">TcpLwipConnection * connM</div><div class="ttdef"><b>Definition:</b> TcpLwipQueues.h:130</div></div>
<div class="ttc" id="anamespaceinet_1_1units_1_1units_html_af52f6a778cd03659324d02848f8aaa33"><div class="ttname"><a href="namespaceinet_1_1units_1_1units.html#af52f6a778cd03659324d02848f8aaa33">inet::units::units::B</a></div><div class="ttdeci">intscale&lt; b, 1, 8 &gt; B</div><div class="ttdef"><b>Definition:</b> Units.h:1168</div></div>
<div class="ttc" id="aclassinet_1_1_chunk_queue_html_aba640a0613a2ce8e1df723f147680356"><div class="ttname"><a href="classinet_1_1_chunk_queue.html#aba640a0613a2ce8e1df723f147680356">inet::ChunkQueue::getLength</a></div><div class="ttdeci">b getLength() const</div><div class="ttdoc">Returns the total length of data currently available in the queue.</div><div class="ttdef"><b>Definition:</b> ChunkQueue.h:74</div></div>
<div class="ttc" id="aclassinet_1_1_chunk_queue_html_a4a8469ee28aeb63b2a1e504fd5625efb"><div class="ttname"><a href="classinet_1_1_chunk_queue.html#a4a8469ee28aeb63b2a1e504fd5625efb">inet::ChunkQueue::push</a></div><div class="ttdeci">void push(const Ptr&lt; const Chunk &gt; &amp;chunk)</div><div class="ttdoc">Inserts the provided chunk at the tail of the queue.</div><div class="ttdef"><b>Definition:</b> ChunkQueue.cc:85</div></div>
<div class="ttc" id="aclassinet_1_1_chunk_queue_html_a13d26c716289c5a3b849f5a5236c8369"><div class="ttname"><a href="classinet_1_1_chunk_queue.html#a13d26c716289c5a3b849f5a5236c8369">inet::ChunkQueue::peek</a></div><div class="ttdeci">const Ptr&lt; const Chunk &gt; peek(b length=b(-1), int flags=0) const</div><div class="ttdoc">Returns the designated data from the head of the queue as an immutable chunk in its current represent...</div><div class="ttdef"><b>Definition:</b> ChunkQueue.cc:56</div></div>
<div class="ttc" id="aclassinet_1_1tcp_1_1_tcp_lwip_send_queue_html_ad3b32e1185c29d4402ef3e5c82304017"><div class="ttname"><a href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html#ad3b32e1185c29d4402ef3e5c82304017">inet::tcp::TcpLwipSendQueue::dataBuffer</a></div><div class="ttdeci">ChunkQueue dataBuffer</div><div class="ttdef"><b>Definition:</b> TcpLwipQueues.h:131</div></div>
<div class="ttc" id="aclassinet_1_1_chunk_queue_html_a7efe9fa3288aa386b5a9014bbf9c2005"><div class="ttname"><a href="classinet_1_1_chunk_queue.html#a7efe9fa3288aa386b5a9014bbf9c2005">inet::ChunkQueue::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Erases all data from the queue.</div><div class="ttdef"><b>Definition:</b> ChunkQueue.cc:78</div></div>
<div class="ttc" id="aclassinet_1_1_chunk_queue_html_a7d31258285b9a997d5fb7024dc2d23c7"><div class="ttname"><a href="classinet_1_1_chunk_queue.html#a7d31258285b9a997d5fb7024dc2d23c7">inet::ChunkQueue::pop</a></div><div class="ttdeci">const Ptr&lt; const Chunk &gt; pop(b length=b(-1), int flags=0)</div><div class="ttdoc">Pops the designated data and returns it as an immutable chunk in its current representation.</div><div class="ttdef"><b>Definition:</b> ChunkQueue.cc:69</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceinet.html">inet</a></li><li class="navelem"><a class="el" href="namespaceinet_1_1tcp.html">tcp</a></li><li class="navelem"><a class="el" href="classinet_1_1tcp_1_1_tcp_lwip_send_queue.html">TcpLwipSendQueue</a></li>
    <li class="footer">Generated on Sun Apr 10 2022 21:00:44 for INET Framework for OMNeT++/OMNEST by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
