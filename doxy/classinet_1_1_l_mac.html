<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>INET Framework for OMNeT++/OMNEST: inet::LMac Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="opp.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classinet_1_1_l_mac.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="classinet_1_1_l_mac-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">inet::LMac Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of L-MAC (Lightweight Medium Access <a class="el" href="classinet_1_1_protocol.html">Protocol</a> for Wireless Sensor Networks [van Hoesel 04] ).  
 <a href="classinet_1_1_l_mac.html#details">More...</a></p>

<p><code>#include &lt;LMac.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for inet::LMac:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classinet_1_1_l_mac.png" usemap="#inet::LMac_map" alt=""/>
  <map id="inet::LMac_map" name="inet::LMac_map">
<area href="classinet_1_1_mac_protocol_base.html" alt="inet::MacProtocolBase" shape="rect" coords="254,224,498,248"/>
<area href="classinet_1_1_i_mac_protocol.html" alt="inet::IMacProtocol" shape="rect" coords="508,224,752,248"/>
<area href="classinet_1_1queueing_1_1_i_active_packet_sink.html" title="This class defines the interface for active packet sinks." alt="inet::queueing::IActivePacketSink" shape="rect" coords="762,224,1006,248"/>
<area href="classinet_1_1_layered_protocol_base.html" alt="inet::LayeredProtocolBase" shape="rect" coords="127,168,371,192"/>
<area href="classinet_1_1_operational_base.html" alt="inet::OperationalBase" shape="rect" coords="127,112,371,136"/>
<area href="classinet_1_1_operational_mixin.html" alt="inet::OperationalMixin&lt; cSimpleModule &gt;" shape="rect" coords="127,56,371,80"/>
<area href="classinet_1_1_i_lifecycle.html" title="Interface to be implemented by modules that want to support failure/recovery, shutdown/restart,..." alt="inet::ILifecycle" shape="rect" coords="254,0,498,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abe8555f759039c3affed35f9a0bcd3ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#abe8555f759039c3affed35f9a0bcd3ea">LMac</a> ()</td></tr>
<tr class="separator:abe8555f759039c3affed35f9a0bcd3ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acea9d66f4fff463c6b4a988f413eb600"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#acea9d66f4fff463c6b4a988f413eb600">~LMac</a> ()</td></tr>
<tr class="memdesc:acea9d66f4fff463c6b4a988f413eb600"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up messges.  <a href="classinet_1_1_l_mac.html#acea9d66f4fff463c6b4a988f413eb600">More...</a><br /></td></tr>
<tr class="separator:acea9d66f4fff463c6b4a988f413eb600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afab3bcb5d9463b4ee3dada423d9a8a89"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#afab3bcb5d9463b4ee3dada423d9a8a89">initialize</a> (int) override</td></tr>
<tr class="memdesc:afab3bcb5d9463b4ee3dada423d9a8a89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization of the module and some variables.  <a href="classinet_1_1_l_mac.html#afab3bcb5d9463b4ee3dada423d9a8a89">More...</a><br /></td></tr>
<tr class="separator:afab3bcb5d9463b4ee3dada423d9a8a89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9b458fbc381437d27fdd77b3b125d57"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#ad9b458fbc381437d27fdd77b3b125d57">handleLowerPacket</a> (<a class="el" href="classinet_1_1_packet.html">Packet</a> *packet) override</td></tr>
<tr class="memdesc:ad9b458fbc381437d27fdd77b3b125d57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle messages from lower layer.  <a href="classinet_1_1_l_mac.html#ad9b458fbc381437d27fdd77b3b125d57">More...</a><br /></td></tr>
<tr class="separator:ad9b458fbc381437d27fdd77b3b125d57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6066e2607f0f650f71b27b0af21a2351"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a6066e2607f0f650f71b27b0af21a2351">handleUpperPacket</a> (<a class="el" href="classinet_1_1_packet.html">Packet</a> *packet) override</td></tr>
<tr class="memdesc:a6066e2607f0f650f71b27b0af21a2351"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle messages from upper layer.  <a href="classinet_1_1_l_mac.html#a6066e2607f0f650f71b27b0af21a2351">More...</a><br /></td></tr>
<tr class="separator:a6066e2607f0f650f71b27b0af21a2351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79b45d4d3072c97cba5acf99fc9043fd"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a79b45d4d3072c97cba5acf99fc9043fd">handleSelfMessage</a> (cMessage *) override</td></tr>
<tr class="memdesc:a79b45d4d3072c97cba5acf99fc9043fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle self messages such as timers.  <a href="classinet_1_1_l_mac.html#a79b45d4d3072c97cba5acf99fc9043fd">More...</a><br /></td></tr>
<tr class="separator:a79b45d4d3072c97cba5acf99fc9043fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f763e271e16381eeb61a5fd0f35a42e"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a9f763e271e16381eeb61a5fd0f35a42e">receiveSignal</a> (cComponent *source, simsignal_t signalID, intval_t value, cObject *details) override</td></tr>
<tr class="memdesc:a9f763e271e16381eeb61a5fd0f35a42e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle control messages from lower layer.  <a href="classinet_1_1_l_mac.html#a9f763e271e16381eeb61a5fd0f35a42e">More...</a><br /></td></tr>
<tr class="separator:a9f763e271e16381eeb61a5fd0f35a42e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fd8bb0a4c396a0c5002ffd84cedd845"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a5fd8bb0a4c396a0c5002ffd84cedd845">encapsulate</a> (<a class="el" href="classinet_1_1_packet.html">Packet</a> *)</td></tr>
<tr class="memdesc:a5fd8bb0a4c396a0c5002ffd84cedd845"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encapsulate the NetwPkt into an MacPkt.  <a href="classinet_1_1_l_mac.html#a5fd8bb0a4c396a0c5002ffd84cedd845">More...</a><br /></td></tr>
<tr class="separator:a5fd8bb0a4c396a0c5002ffd84cedd845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e2100f5496ff39cce8873e1e981340f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a7e2100f5496ff39cce8873e1e981340f">decapsulate</a> (<a class="el" href="classinet_1_1_packet.html">Packet</a> *)</td></tr>
<tr class="separator:a7e2100f5496ff39cce8873e1e981340f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1958e6535c94298cf5e4e1181670fa6a"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classinet_1_1queueing_1_1_i_passive_packet_source.html">queueing::IPassivePacketSource</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a1958e6535c94298cf5e4e1181670fa6a">getProvider</a> (cGate *gate) override</td></tr>
<tr class="memdesc:a1958e6535c94298cf5e4e1181670fa6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the passive packet source from where packets are pulled or nullptr if the connected module doesn't implement the interface.  <a href="classinet_1_1_l_mac.html#a1958e6535c94298cf5e4e1181670fa6a">More...</a><br /></td></tr>
<tr class="separator:a1958e6535c94298cf5e4e1181670fa6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade43433d83733cc2cef66f9ada7f72ec"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#ade43433d83733cc2cef66f9ada7f72ec">handleCanPullPacketChanged</a> (cGate *gate) override</td></tr>
<tr class="memdesc:ade43433d83733cc2cef66f9ada7f72ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notifies about a change in the possibility of pulling some packet from the passive packet source at the given gate.  <a href="classinet_1_1_l_mac.html#ade43433d83733cc2cef66f9ada7f72ec">More...</a><br /></td></tr>
<tr class="separator:ade43433d83733cc2cef66f9ada7f72ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9d51f2e2d16f4307a9f6bfed997948a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#aa9d51f2e2d16f4307a9f6bfed997948a">handlePullPacketProcessed</a> (<a class="el" href="classinet_1_1_packet.html">Packet</a> *packet, cGate *gate, bool successful) override</td></tr>
<tr class="memdesc:aa9d51f2e2d16f4307a9f6bfed997948a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notifies about the completion of the packet processing for a packet that was pulled earlier independently whether the packet is passed or streamed.  <a href="classinet_1_1_l_mac.html#aa9d51f2e2d16f4307a9f6bfed997948a">More...</a><br /></td></tr>
<tr class="separator:aa9d51f2e2d16f4307a9f6bfed997948a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classinet_1_1_operational_mixin"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classinet_1_1_operational_mixin')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classinet_1_1_operational_mixin.html">inet::OperationalMixin&lt; cSimpleModule &gt;</a></td></tr>
<tr class="memitem:aa5d8cb85d929bf6592e6dc5226b798c3 inherit pub_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#aa5d8cb85d929bf6592e6dc5226b798c3">~OperationalMixin</a> ()</td></tr>
<tr class="memdesc:aa5d8cb85d929bf6592e6dc5226b798c3 inherit pub_methods_classinet_1_1_operational_mixin"><td class="mdescLeft">&#160;</td><td class="mdescRight">}@  <a href="classinet_1_1_operational_mixin.html#aa5d8cb85d929bf6592e6dc5226b798c3">More...</a><br /></td></tr>
<tr class="separator:aa5d8cb85d929bf6592e6dc5226b798c3 inherit pub_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classinet_1_1_i_lifecycle"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classinet_1_1_i_lifecycle')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classinet_1_1_i_lifecycle.html">inet::ILifecycle</a></td></tr>
<tr class="memitem:a42ada991baf0d85f6c3b4adcf2b0e87b inherit pub_methods_classinet_1_1_i_lifecycle"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_i_lifecycle.html#a42ada991baf0d85f6c3b4adcf2b0e87b">~ILifecycle</a> ()</td></tr>
<tr class="separator:a42ada991baf0d85f6c3b4adcf2b0e87b inherit pub_methods_classinet_1_1_i_lifecycle"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classinet_1_1_i_mac_protocol"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classinet_1_1_i_mac_protocol')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classinet_1_1_i_mac_protocol.html">inet::IMacProtocol</a></td></tr>
<tr class="memitem:a2187a49f153c4ca72e2240ffb1c07f5b inherit pub_methods_classinet_1_1_i_mac_protocol"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_i_mac_protocol.html#a2187a49f153c4ca72e2240ffb1c07f5b">~IMacProtocol</a> ()</td></tr>
<tr class="separator:a2187a49f153c4ca72e2240ffb1c07f5b inherit pub_methods_classinet_1_1_i_mac_protocol"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classinet_1_1queueing_1_1_i_active_packet_sink"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classinet_1_1queueing_1_1_i_active_packet_sink')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classinet_1_1queueing_1_1_i_active_packet_sink.html">inet::queueing::IActivePacketSink</a></td></tr>
<tr class="memitem:ad206c14d6ac3aafb1d97c2bf1fdf9956 inherit pub_methods_classinet_1_1queueing_1_1_i_active_packet_sink"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1queueing_1_1_i_active_packet_sink.html#ad206c14d6ac3aafb1d97c2bf1fdf9956">~IActivePacketSink</a> ()</td></tr>
<tr class="separator:ad206c14d6ac3aafb1d97c2bf1fdf9956 inherit pub_methods_classinet_1_1queueing_1_1_i_active_packet_sink"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:ab261282b797df23143e81ba5ef478b38"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38">States</a> { <br />
&#160;&#160;<a class="el" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38ad0dfc539acde109b07bba7202c869ed7">INIT</a>, 
<a class="el" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7">SLEEP</a>, 
<a class="el" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a339bbb708ab398df5e2bebe58b82c2fc">CCA</a>, 
<a class="el" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a01011b1d79aa44f7751103e86a6e4454">WAIT_CONTROL</a>, 
<br />
&#160;&#160;<a class="el" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38afa6102c2bdab3d3103012eace108d9ed">WAIT_DATA</a>, 
<a class="el" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38aef3442d2c210194c37f03cad691df2c2">SEND_CONTROL</a>, 
<a class="el" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a0e816e73b90c713cebf169bb56de39e5">SEND_DATA</a>
<br />
 }</td></tr>
<tr class="memdesc:ab261282b797df23143e81ba5ef478b38"><td class="mdescLeft">&#160;</td><td class="mdescRight">MAC states.  <a href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38">More...</a><br /></td></tr>
<tr class="separator:ab261282b797df23143e81ba5ef478b38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_types_classinet_1_1_operational_mixin"><td colspan="2" onclick="javascript:toggleInherit('pro_types_classinet_1_1_operational_mixin')"><img src="closed.png" alt="-"/>&#160;Protected Types inherited from <a class="el" href="classinet_1_1_operational_mixin.html">inet::OperationalMixin&lt; cSimpleModule &gt;</a></td></tr>
<tr class="memitem:ae783939fba8872fbd210da66bfdeed42 inherit pro_types_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#ae783939fba8872fbd210da66bfdeed42">State</a> </td></tr>
<tr class="separator:ae783939fba8872fbd210da66bfdeed42 inherit pro_types_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a27c173ff0a4f2409939de17310b19227"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a27c173ff0a4f2409939de17310b19227">configureNetworkInterface</a> () override</td></tr>
<tr class="memdesc:a27c173ff0a4f2409939de17310b19227"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate new interface address.  <a href="classinet_1_1_l_mac.html#a27c173ff0a4f2409939de17310b19227">More...</a><br /></td></tr>
<tr class="separator:a27c173ff0a4f2409939de17310b19227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af62b278aeb39bda85f2510825a35ae93"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#af62b278aeb39bda85f2510825a35ae93">handleCommand</a> (cMessage *msg)</td></tr>
<tr class="separator:af62b278aeb39bda85f2510825a35ae93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4b0ba3c11729879f585879380bb2917"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#ac4b0ba3c11729879f585879380bb2917">findNewSlot</a> ()</td></tr>
<tr class="memdesc:ac4b0ba3c11729879f585879380bb2917"><td class="mdescLeft">&#160;</td><td class="mdescRight">find a new slot  <a href="classinet_1_1_l_mac.html#ac4b0ba3c11729879f585879380bb2917">More...</a><br /></td></tr>
<tr class="separator:ac4b0ba3c11729879f585879380bb2917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43c569acb00ef8b17ee8a241d7d92b5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a43c569acb00ef8b17ee8a241d7d92b5c">attachSignal</a> (<a class="el" href="classinet_1_1_packet.html">Packet</a> *macPkt)</td></tr>
<tr class="memdesc:a43c569acb00ef8b17ee8a241d7d92b5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal function to attach a signal to the packet.  <a href="classinet_1_1_l_mac.html#a43c569acb00ef8b17ee8a241d7d92b5c">More...</a><br /></td></tr>
<tr class="separator:a43c569acb00ef8b17ee8a241d7d92b5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classinet_1_1_mac_protocol_base"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classinet_1_1_mac_protocol_base')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classinet_1_1_mac_protocol_base.html">inet::MacProtocolBase</a></td></tr>
<tr class="memitem:a9b65875967a869921cd0ba8d99671c95 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a9b65875967a869921cd0ba8d99671c95">MacProtocolBase</a> ()</td></tr>
<tr class="separator:a9b65875967a869921cd0ba8d99671c95 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17c07fc079ee71631ac6e0ee76762960 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a17c07fc079ee71631ac6e0ee76762960">~MacProtocolBase</a> ()</td></tr>
<tr class="separator:a17c07fc079ee71631ac6e0ee76762960 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9cf9628fe04980abf3c7d86fa4cf8b6 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#aa9cf9628fe04980abf3c7d86fa4cf8b6">registerInterface</a> ()</td></tr>
<tr class="separator:aa9cf9628fe04980abf3c7d86fa4cf8b6 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2b8274ca4fce4b210b1c523927ad5a4 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classinet_1_1_mac_address.html">MacAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#ac2b8274ca4fce4b210b1c523927ad5a4">parseMacAddressParameter</a> (const char *addrstr)</td></tr>
<tr class="separator:ac2b8274ca4fce4b210b1c523927ad5a4 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af515de3b0818bdd09f430d46cdb00c5b inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#af515de3b0818bdd09f430d46cdb00c5b">deleteCurrentTxFrame</a> ()</td></tr>
<tr class="separator:af515de3b0818bdd09f430d46cdb00c5b inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9919287aaa4521728ef127e7649936c0 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a9919287aaa4521728ef127e7649936c0">dropCurrentTxFrame</a> (<a class="el" href="classinet_1_1_packet_drop_details.html">PacketDropDetails</a> &amp;details)</td></tr>
<tr class="separator:a9919287aaa4521728ef127e7649936c0 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a357ea093102491a4f3b49d180e9655 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a1a357ea093102491a4f3b49d180e9655">handleMessageWhenDown</a> (cMessage *msg) override</td></tr>
<tr class="separator:a1a357ea093102491a4f3b49d180e9655 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e58fc4637c4d7b3b1b5052d2b5d514f inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a0e58fc4637c4d7b3b1b5052d2b5d514f">sendUp</a> (cMessage *message)</td></tr>
<tr class="separator:a0e58fc4637c4d7b3b1b5052d2b5d514f inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcd8fe1c33a039ec5e86fd1337cccc0f inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#abcd8fe1c33a039ec5e86fd1337cccc0f">sendDown</a> (cMessage *message)</td></tr>
<tr class="separator:abcd8fe1c33a039ec5e86fd1337cccc0f inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab883e2bc072489da8c02bf70967620a7 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#ab883e2bc072489da8c02bf70967620a7">isUpperMessage</a> (cMessage *message) const override</td></tr>
<tr class="separator:ab883e2bc072489da8c02bf70967620a7 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a694cd0d1b99c791c04b0b884fa571b91 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a694cd0d1b99c791c04b0b884fa571b91">isLowerMessage</a> (cMessage *message) const override</td></tr>
<tr class="separator:a694cd0d1b99c791c04b0b884fa571b91 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37fae0074656bb02d607b8fc288662a1 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a37fae0074656bb02d607b8fc288662a1">isInitializeStage</a> (int stage) const override</td></tr>
<tr class="separator:a37fae0074656bb02d607b8fc288662a1 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a242f9c46d76989131c6eeb31c35debdf inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a242f9c46d76989131c6eeb31c35debdf">isModuleStartStage</a> (int stage) const override</td></tr>
<tr class="separator:a242f9c46d76989131c6eeb31c35debdf inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e9dbf5a3baaa796c1432f046fe7beff inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a9e9dbf5a3baaa796c1432f046fe7beff">isModuleStopStage</a> (int stage) const override</td></tr>
<tr class="separator:a9e9dbf5a3baaa796c1432f046fe7beff inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acac976203b58a6552bad7a922872d9c6 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#acac976203b58a6552bad7a922872d9c6">flushQueue</a> (<a class="el" href="classinet_1_1_packet_drop_details.html">PacketDropDetails</a> &amp;details)</td></tr>
<tr class="memdesc:acac976203b58a6552bad7a922872d9c6 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">should clear queue and emit signal "packetDropped" with entire packets  <a href="classinet_1_1_mac_protocol_base.html#acac976203b58a6552bad7a922872d9c6">More...</a><br /></td></tr>
<tr class="separator:acac976203b58a6552bad7a922872d9c6 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17598a546bd117faedf7ea664fc02a40 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a17598a546bd117faedf7ea664fc02a40">clearQueue</a> ()</td></tr>
<tr class="memdesc:a17598a546bd117faedf7ea664fc02a40 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">should clear queue silently  <a href="classinet_1_1_mac_protocol_base.html#a17598a546bd117faedf7ea664fc02a40">More...</a><br /></td></tr>
<tr class="separator:a17598a546bd117faedf7ea664fc02a40 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a118173d1bf23cc5a71441f781884a1fa inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a118173d1bf23cc5a71441f781884a1fa">receiveSignal</a> (cComponent *source, simsignal_t signalID, cObject *obj, cObject *details) override</td></tr>
<tr class="separator:a118173d1bf23cc5a71441f781884a1fa inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ee68ec388eb14743c71f15561775d82 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a1ee68ec388eb14743c71f15561775d82">handleStartOperation</a> (<a class="el" href="classinet_1_1_lifecycle_operation.html">LifecycleOperation</a> *operation) override</td></tr>
<tr class="separator:a1ee68ec388eb14743c71f15561775d82 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade808ee784a38b17aaeca0c5d10a9c1e inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#ade808ee784a38b17aaeca0c5d10a9c1e">handleStopOperation</a> (<a class="el" href="classinet_1_1_lifecycle_operation.html">LifecycleOperation</a> *operation) override</td></tr>
<tr class="separator:ade808ee784a38b17aaeca0c5d10a9c1e inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30c8bad629175268ee11b170fb7a9e79 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a30c8bad629175268ee11b170fb7a9e79">handleCrashOperation</a> (<a class="el" href="classinet_1_1_lifecycle_operation.html">LifecycleOperation</a> *operation) override</td></tr>
<tr class="separator:a30c8bad629175268ee11b170fb7a9e79 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5318e542573303f9d43d88d5d37d69d6 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinet_1_1queueing_1_1_i_packet_queue.html">queueing::IPacketQueue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a5318e542573303f9d43d88d5d37d69d6">getQueue</a> (cGate *gate) const</td></tr>
<tr class="separator:a5318e542573303f9d43d88d5d37d69d6 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9521795aacedfaa68ec24fe46c948c32 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a9521795aacedfaa68ec24fe46c948c32">canDequeuePacket</a> () const</td></tr>
<tr class="separator:a9521795aacedfaa68ec24fe46c948c32 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af77a5b0d9ca1b84d81c20efb2180a500 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classinet_1_1_packet.html">Packet</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#af77a5b0d9ca1b84d81c20efb2180a500">dequeuePacket</a> ()</td></tr>
<tr class="separator:af77a5b0d9ca1b84d81c20efb2180a500 inherit pro_methods_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classinet_1_1_layered_protocol_base"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classinet_1_1_layered_protocol_base')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classinet_1_1_layered_protocol_base.html">inet::LayeredProtocolBase</a></td></tr>
<tr class="memitem:adb925a82fa4a6f287c5ce08cb1151cbf inherit pro_methods_classinet_1_1_layered_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_layered_protocol_base.html#adb925a82fa4a6f287c5ce08cb1151cbf">handleMessageWhenUp</a> (cMessage *message) override</td></tr>
<tr class="separator:adb925a82fa4a6f287c5ce08cb1151cbf inherit pro_methods_classinet_1_1_layered_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ae6afb5ef15f4e5673b91fe920afe66 inherit pro_methods_classinet_1_1_layered_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_layered_protocol_base.html#a5ae6afb5ef15f4e5673b91fe920afe66">handleUpperMessage</a> (cMessage *message)</td></tr>
<tr class="separator:a5ae6afb5ef15f4e5673b91fe920afe66 inherit pro_methods_classinet_1_1_layered_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3576c9ad97d65194374bb5ffc93e7af7 inherit pro_methods_classinet_1_1_layered_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_layered_protocol_base.html#a3576c9ad97d65194374bb5ffc93e7af7">handleLowerMessage</a> (cMessage *message)</td></tr>
<tr class="separator:a3576c9ad97d65194374bb5ffc93e7af7 inherit pro_methods_classinet_1_1_layered_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a693e776909be4c0f006b8f584ad35489 inherit pro_methods_classinet_1_1_layered_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_layered_protocol_base.html#a693e776909be4c0f006b8f584ad35489">handleUpperCommand</a> (cMessage *message)</td></tr>
<tr class="separator:a693e776909be4c0f006b8f584ad35489 inherit pro_methods_classinet_1_1_layered_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67136df9fce98c7d2e635d8de2960848 inherit pro_methods_classinet_1_1_layered_protocol_base"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_layered_protocol_base.html#a67136df9fce98c7d2e635d8de2960848">handleLowerCommand</a> (cMessage *message)</td></tr>
<tr class="separator:a67136df9fce98c7d2e635d8de2960848 inherit pro_methods_classinet_1_1_layered_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classinet_1_1_operational_mixin"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classinet_1_1_operational_mixin')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classinet_1_1_operational_mixin.html">inet::OperationalMixin&lt; cSimpleModule &gt;</a></td></tr>
<tr class="memitem:a2333194f9fd6fec0d20ef827798f2ccb inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#a2333194f9fd6fec0d20ef827798f2ccb">numInitStages</a> () const override</td></tr>
<tr class="separator:a2333194f9fd6fec0d20ef827798f2ccb inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15ba2ee5b5b270747bb3645b84e4996e inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#a15ba2ee5b5b270747bb3645b84e4996e">refreshDisplay</a> () const override</td></tr>
<tr class="separator:a15ba2ee5b5b270747bb3645b84e4996e inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7520f89a2ddc57246602fdd6d0b47a8d inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#a7520f89a2ddc57246602fdd6d0b47a8d">handleMessage</a> (cMessage *msg) override</td></tr>
<tr class="separator:a7520f89a2ddc57246602fdd6d0b47a8d inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c7ee2390370a79773937d2ab7782eb2 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#a9c7ee2390370a79773937d2ab7782eb2">handleOperationStage</a> (<a class="el" href="classinet_1_1_lifecycle_operation.html">LifecycleOperation</a> *operation, <a class="el" href="classinet_1_1_i_done_callback.html">IDoneCallback</a> *doneCallback) override</td></tr>
<tr class="memdesc:a9c7ee2390370a79773937d2ab7782eb2 inherit pro_methods_classinet_1_1_operational_mixin"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform one stage of a lifecycle operation.  <a href="classinet_1_1_operational_mixin.html#a9c7ee2390370a79773937d2ab7782eb2">More...</a><br /></td></tr>
<tr class="separator:a9c7ee2390370a79773937d2ab7782eb2 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af630b1b58653ffa8bc398000de0797c3 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classinet_1_1_operational_mixin.html#ae783939fba8872fbd210da66bfdeed42">State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#af630b1b58653ffa8bc398000de0797c3">getInitialOperationalState</a> () const</td></tr>
<tr class="memdesc:af630b1b58653ffa8bc398000de0797c3 inherit pro_methods_classinet_1_1_operational_mixin"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns initial operational state: OPERATING or NOT_OPERATING.  <a href="classinet_1_1_operational_mixin.html#af630b1b58653ffa8bc398000de0797c3">More...</a><br /></td></tr>
<tr class="separator:af630b1b58653ffa8bc398000de0797c3 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab26348074d447114d299af1d8f3b2b17 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#ab26348074d447114d299af1d8f3b2b17">handleActiveOperationTimeout</a> (cMessage *message)</td></tr>
<tr class="separator:ab26348074d447114d299af1d8f3b2b17 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a859efb07040a87389a5b35d61fde5db8 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#a859efb07040a87389a5b35d61fde5db8">isUp</a> () const</td></tr>
<tr class="memdesc:a859efb07040a87389a5b35d61fde5db8 inherit pro_methods_classinet_1_1_operational_mixin"><td class="mdescLeft">&#160;</td><td class="mdescRight">utility functions  <a href="classinet_1_1_operational_mixin.html#a859efb07040a87389a5b35d61fde5db8">More...</a><br /></td></tr>
<tr class="separator:a859efb07040a87389a5b35d61fde5db8 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9196d6fce942da9285c99c1cf667f52 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#ab9196d6fce942da9285c99c1cf667f52">isDown</a> () const</td></tr>
<tr class="separator:ab9196d6fce942da9285c99c1cf667f52 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64ce13529a98f9a7ef079516a06ae43c inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#a64ce13529a98f9a7ef079516a06ae43c">setOperationalState</a> (<a class="el" href="classinet_1_1_operational_mixin.html#ae783939fba8872fbd210da66bfdeed42">State</a> newState)</td></tr>
<tr class="separator:a64ce13529a98f9a7ef079516a06ae43c inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bef9a2fe6172f6b587f8126219cfc13 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#a6bef9a2fe6172f6b587f8126219cfc13">scheduleOperationTimeout</a> (simtime_t timeout)</td></tr>
<tr class="separator:a6bef9a2fe6172f6b587f8126219cfc13 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae82844acd3db6ecc619e416fd67c101c inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#ae82844acd3db6ecc619e416fd67c101c">setupActiveOperation</a> (<a class="el" href="classinet_1_1_lifecycle_operation.html">LifecycleOperation</a> *operation, <a class="el" href="classinet_1_1_i_done_callback.html">IDoneCallback</a> *doneCallback, <a class="el" href="classinet_1_1_operational_mixin.html#ae783939fba8872fbd210da66bfdeed42">State</a>)</td></tr>
<tr class="separator:ae82844acd3db6ecc619e416fd67c101c inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae23a78cc3deb39a2c923960853bcdfb inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#aae23a78cc3deb39a2c923960853bcdfb">delayActiveOperationFinish</a> (simtime_t timeout)</td></tr>
<tr class="separator:aae23a78cc3deb39a2c923960853bcdfb inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5d835b432ccfbed1cf73de7c3eb444d inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#af5d835b432ccfbed1cf73de7c3eb444d">startActiveOperationExtraTime</a> (simtime_t delay=SIMTIME_ZERO)</td></tr>
<tr class="separator:af5d835b432ccfbed1cf73de7c3eb444d inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57a88a7052a46a78fa88380b94b7a2b3 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#a57a88a7052a46a78fa88380b94b7a2b3">startActiveOperationExtraTimeOrFinish</a> (simtime_t extraTime)</td></tr>
<tr class="separator:a57a88a7052a46a78fa88380b94b7a2b3 inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d25207c2807575a5392ba74ccbafc7b inherit pro_methods_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#a0d25207c2807575a5392ba74ccbafc7b">finishActiveOperation</a> ()</td></tr>
<tr class="separator:a0d25207c2807575a5392ba74ccbafc7b inherit pro_methods_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:acb057c3f2e76c09661ecf20530bea5e8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">SETUP_PHASE</a></td></tr>
<tr class="memdesc:acb057c3f2e76c09661ecf20530bea5e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">the setup phase is the beginning of the simulation, where only control packets at very small slot durations are exchanged.  <a href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">More...</a><br /></td></tr>
<tr class="separator:acb057c3f2e76c09661ecf20530bea5e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c4374dec84f49e4bf7d40ad236275b1"><td class="memItemLeft" align="right" valign="top">cOutVector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a1c4374dec84f49e4bf7d40ad236275b1">slotChange</a></td></tr>
<tr class="memdesc:a1c4374dec84f49e4bf7d40ad236275b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">indicate how often the node needs to change its slot because of collisions  <a href="classinet_1_1_l_mac.html#a1c4374dec84f49e4bf7d40ad236275b1">More...</a><br /></td></tr>
<tr class="separator:a1c4374dec84f49e4bf7d40ad236275b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6572cdb86cfc752b4ea802c0aea4affe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38">States</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a></td></tr>
<tr class="memdesc:a6572cdb86cfc752b4ea802c0aea4affe"><td class="mdescLeft">&#160;</td><td class="mdescRight">keep track of MAC state  <a href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">More...</a><br /></td></tr>
<tr class="separator:a6572cdb86cfc752b4ea802c0aea4affe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35c9e4032ae5c7d63af2f2df90d5d6fa"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">slotDuration</a></td></tr>
<tr class="memdesc:a35c9e4032ae5c7d63af2f2df90d5d6fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duration of a slot.  <a href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">More...</a><br /></td></tr>
<tr class="separator:a35c9e4032ae5c7d63af2f2df90d5d6fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31f2110dc7a2fe38de7ef6ab1cc96f20"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceinet_1_1units_1_1values.html#a02f32b4417da580f5e348f2c3cfb40a7">b</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a31f2110dc7a2fe38de7ef6ab1cc96f20">headerLength</a></td></tr>
<tr class="memdesc:a31f2110dc7a2fe38de7ef6ab1cc96f20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of the header.  <a href="classinet_1_1_l_mac.html#a31f2110dc7a2fe38de7ef6ab1cc96f20">More...</a><br /></td></tr>
<tr class="separator:a31f2110dc7a2fe38de7ef6ab1cc96f20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9676a8ac2c1672fd72192ce5c7f05a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceinet_1_1units_1_1values.html#a02f32b4417da580f5e348f2c3cfb40a7">b</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#ab9676a8ac2c1672fd72192ce5c7f05a5">ctrlFrameLength</a></td></tr>
<tr class="memdesc:ab9676a8ac2c1672fd72192ce5c7f05a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of the control frames.  <a href="classinet_1_1_l_mac.html#ab9676a8ac2c1672fd72192ce5c7f05a5">More...</a><br /></td></tr>
<tr class="separator:ab9676a8ac2c1672fd72192ce5c7f05a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e6bee0ad735aa6a73193043367d8e71"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a8e6bee0ad735aa6a73193043367d8e71">controlDuration</a></td></tr>
<tr class="memdesc:a8e6bee0ad735aa6a73193043367d8e71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duration of teh control time in each slot.  <a href="classinet_1_1_l_mac.html#a8e6bee0ad735aa6a73193043367d8e71">More...</a><br /></td></tr>
<tr class="separator:a8e6bee0ad735aa6a73193043367d8e71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50659b070d103e512b0ae66dd04fa419"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a50659b070d103e512b0ae66dd04fa419">myId</a></td></tr>
<tr class="memdesc:a50659b070d103e512b0ae66dd04fa419"><td class="mdescLeft">&#160;</td><td class="mdescRight">my ID  <a href="classinet_1_1_l_mac.html#a50659b070d103e512b0ae66dd04fa419">More...</a><br /></td></tr>
<tr class="separator:a50659b070d103e512b0ae66dd04fa419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b8a9ce1d762d556b6364790604fc68b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a></td></tr>
<tr class="memdesc:a0b8a9ce1d762d556b6364790604fc68b"><td class="mdescLeft">&#160;</td><td class="mdescRight">my slot ID  <a href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">More...</a><br /></td></tr>
<tr class="separator:a0b8a9ce1d762d556b6364790604fc68b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c9573c25255ff2c2263d661c9ad4e0a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a></td></tr>
<tr class="memdesc:a0c9573c25255ff2c2263d661c9ad4e0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">how many slots are there  <a href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">More...</a><br /></td></tr>
<tr class="separator:a0c9573c25255ff2c2263d661c9ad4e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5410823cbad246023b701beba853785"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#ac5410823cbad246023b701beba853785">currSlot</a></td></tr>
<tr class="memdesc:ac5410823cbad246023b701beba853785"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current slot of the simulation.  <a href="classinet_1_1_l_mac.html#ac5410823cbad246023b701beba853785">More...</a><br /></td></tr>
<tr class="separator:ac5410823cbad246023b701beba853785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd5fd2ef6ddb92f412fd0165372d4f4b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinet_1_1_mac_address.html">MacAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">occSlotsDirect</a> [64]</td></tr>
<tr class="memdesc:afd5fd2ef6ddb92f412fd0165372d4f4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Occupied slots from nodes, from which I hear directly.  <a href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">More...</a><br /></td></tr>
<tr class="separator:afd5fd2ef6ddb92f412fd0165372d4f4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30567d78dea171b6be431f62711d30ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinet_1_1_mac_address.html">MacAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a> [64]</td></tr>
<tr class="memdesc:a30567d78dea171b6be431f62711d30ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Occupied slots of two-hop neighbors.  <a href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">More...</a><br /></td></tr>
<tr class="separator:a30567d78dea171b6be431f62711d30ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac69fe9a1e6950931d169bd1f5746adfe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#ac69fe9a1e6950931d169bd1f5746adfe">reservedMobileSlots</a></td></tr>
<tr class="memdesc:ac69fe9a1e6950931d169bd1f5746adfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">The first couple of slots are reserved for nodes with special needs to avoid changing slots for them (mobile nodes)  <a href="classinet_1_1_l_mac.html#ac69fe9a1e6950931d169bd1f5746adfe">More...</a><br /></td></tr>
<tr class="separator:ac69fe9a1e6950931d169bd1f5746adfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e43e832587384ec3bdc1057c6554626"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinet_1_1_module_ref_by_par.html">ModuleRefByPar</a>&lt; <a class="el" href="classinet_1_1physicallayer_1_1_i_radio.html">physicallayer::IRadio</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">radio</a></td></tr>
<tr class="memdesc:a3e43e832587384ec3bdc1057c6554626"><td class="mdescLeft">&#160;</td><td class="mdescRight">The radio.  <a href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">More...</a><br /></td></tr>
<tr class="separator:a3e43e832587384ec3bdc1057c6554626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9384a418719092ce561351e5cfa05fdd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinet_1_1physicallayer_1_1_i_radio.html#ac7d3c2a56d709c5d038dc7dff4d97159">physicallayer::IRadio::TransmissionState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a9384a418719092ce561351e5cfa05fdd">transmissionState</a></td></tr>
<tr class="separator:a9384a418719092ce561351e5cfa05fdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93207d3fa68c5be1050098d3951fa901"><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">wakeup</a></td></tr>
<tr class="separator:a93207d3fa68c5be1050098d3951fa901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840a9d6f5dd43360783976eb141427ac"><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a></td></tr>
<tr class="separator:a840a9d6f5dd43360783976eb141427ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af44b69395285bbb7b9df2546e9ea4345"><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#af44b69395285bbb7b9df2546e9ea4345">sendData</a></td></tr>
<tr class="separator:af44b69395285bbb7b9df2546e9ea4345"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec4d39b176fb0c4ec55af82ff08d475e"><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#aec4d39b176fb0c4ec55af82ff08d475e">initChecker</a></td></tr>
<tr class="separator:aec4d39b176fb0c4ec55af82ff08d475e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90a8d86e6c3e900c2782dc25a79f0d17"><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a90a8d86e6c3e900c2782dc25a79f0d17">checkChannel</a></td></tr>
<tr class="separator:a90a8d86e6c3e900c2782dc25a79f0d17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a066a6998a29eb65099f158d1c77ef35a"><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a066a6998a29eb65099f158d1c77ef35a">start_lmac</a></td></tr>
<tr class="separator:a066a6998a29eb65099f158d1c77ef35a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a683b18b11632f14f79b40e00373665a9"><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a683b18b11632f14f79b40e00373665a9">send_control</a></td></tr>
<tr class="separator:a683b18b11632f14f79b40e00373665a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e842919c523c5b07926d0d58ef3345c"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a6e842919c523c5b07926d0d58ef3345c">bitrate</a></td></tr>
<tr class="memdesc:a6e842919c523c5b07926d0d58ef3345c"><td class="mdescLeft">&#160;</td><td class="mdescRight">the bit rate at which we transmit  <a href="classinet_1_1_l_mac.html#a6e842919c523c5b07926d0d58ef3345c">More...</a><br /></td></tr>
<tr class="separator:a6e842919c523c5b07926d0d58ef3345c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classinet_1_1_mac_protocol_base"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classinet_1_1_mac_protocol_base')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classinet_1_1_mac_protocol_base.html">inet::MacProtocolBase</a></td></tr>
<tr class="memitem:aa15d2ec2832daffdd6982a67bd5407f1 inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#aa15d2ec2832daffdd6982a67bd5407f1">upperLayerInGateId</a> = -1</td></tr>
<tr class="memdesc:aa15d2ec2832daffdd6982a67bd5407f1 inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gate ids.  <a href="classinet_1_1_mac_protocol_base.html#aa15d2ec2832daffdd6982a67bd5407f1">More...</a><br /></td></tr>
<tr class="separator:aa15d2ec2832daffdd6982a67bd5407f1 inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee9660c41443099afedf1cc76868f7a8 inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#aee9660c41443099afedf1cc76868f7a8">upperLayerOutGateId</a> = -1</td></tr>
<tr class="separator:aee9660c41443099afedf1cc76868f7a8 inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae588f5c88ba9bc8a6187c4c21c71a0e9 inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#ae588f5c88ba9bc8a6187c4c21c71a0e9">lowerLayerInGateId</a> = -1</td></tr>
<tr class="separator:ae588f5c88ba9bc8a6187c4c21c71a0e9 inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89bfddde30d091ae2d8c1d839366ff3f inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a89bfddde30d091ae2d8c1d839366ff3f">lowerLayerOutGateId</a> = -1</td></tr>
<tr class="separator:a89bfddde30d091ae2d8c1d839366ff3f inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bdd471f869ccf0ea716e8bce60bdada inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">opp_component_ptr&lt; <a class="el" href="classinet_1_1_network_interface.html">NetworkInterface</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a1bdd471f869ccf0ea716e8bce60bdada">networkInterface</a></td></tr>
<tr class="separator:a1bdd471f869ccf0ea716e8bce60bdada inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ce2d6e0b02f4f71b5d2ef8e3476dc37 inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">opp_component_ptr&lt; cModule &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a0ce2d6e0b02f4f71b5d2ef8e3476dc37">hostModule</a></td></tr>
<tr class="separator:a0ce2d6e0b02f4f71b5d2ef8e3476dc37 inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a05ba95252550f1e27df46ea4052736 inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinet_1_1_packet.html">Packet</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a5a05ba95252550f1e27df46ea4052736">currentTxFrame</a> = nullptr</td></tr>
<tr class="memdesc:a5a05ba95252550f1e27df46ea4052736 inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently transmitted frame if any.  <a href="classinet_1_1_mac_protocol_base.html#a5a05ba95252550f1e27df46ea4052736">More...</a><br /></td></tr>
<tr class="separator:a5a05ba95252550f1e27df46ea4052736 inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f66409a3316782d68ab967eb1cff36a inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memItemLeft" align="right" valign="top">opp_component_ptr&lt; <a class="el" href="classinet_1_1queueing_1_1_i_packet_queue.html">queueing::IPacketQueue</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_mac_protocol_base.html#a1f66409a3316782d68ab967eb1cff36a">txQueue</a></td></tr>
<tr class="memdesc:a1f66409a3316782d68ab967eb1cff36a inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="mdescLeft">&#160;</td><td class="mdescRight">Messages received from upper layer and to be transmitted later.  <a href="classinet_1_1_mac_protocol_base.html#a1f66409a3316782d68ab967eb1cff36a">More...</a><br /></td></tr>
<tr class="separator:a1f66409a3316782d68ab967eb1cff36a inherit pro_attribs_classinet_1_1_mac_protocol_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classinet_1_1_operational_mixin"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classinet_1_1_operational_mixin')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classinet_1_1_operational_mixin.html">inet::OperationalMixin&lt; cSimpleModule &gt;</a></td></tr>
<tr class="memitem:aff3758b932e1bddc28ce382481b0d086 inherit pro_attribs_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinet_1_1_operational_mixin.html#ae783939fba8872fbd210da66bfdeed42">State</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#aff3758b932e1bddc28ce382481b0d086">operationalState</a></td></tr>
<tr class="separator:aff3758b932e1bddc28ce382481b0d086 inherit pro_attribs_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e44eed4e241b419c83549daba6c5005 inherit pro_attribs_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#a0e44eed4e241b419c83549daba6c5005">lastChange</a></td></tr>
<tr class="separator:a0e44eed4e241b419c83549daba6c5005 inherit pro_attribs_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a029c258826c8b0bd8b9b6ec0c2aad6c9 inherit pro_attribs_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">Operation&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#a029c258826c8b0bd8b9b6ec0c2aad6c9">activeOperation</a></td></tr>
<tr class="separator:a029c258826c8b0bd8b9b6ec0c2aad6c9 inherit pro_attribs_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e8cbf97ebdfe7b61e3d493e8ca0a0e8 inherit pro_attribs_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#a6e8cbf97ebdfe7b61e3d493e8ca0a0e8">activeOperationTimeout</a></td></tr>
<tr class="separator:a6e8cbf97ebdfe7b61e3d493e8ca0a0e8 inherit pro_attribs_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d937bf9af1649f96c7d69ddf48ecc65 inherit pro_attribs_classinet_1_1_operational_mixin"><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_operational_mixin.html#a7d937bf9af1649f96c7d69ddf48ecc65">activeOperationExtraTimer</a></td></tr>
<tr class="separator:a7d937bf9af1649f96c7d69ddf48ecc65 inherit pro_attribs_classinet_1_1_operational_mixin"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a91af0eaae371a9fe08383163970f4b61"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classinet_1_1_mac_address.html">MacAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a91af0eaae371a9fe08383163970f4b61">LMAC_NO_RECEIVER</a></td></tr>
<tr class="memdesc:a91af0eaae371a9fe08383163970f4b61"><td class="mdescLeft">&#160;</td><td class="mdescRight">dummy receiver address to indicate no pending packets in the control packet  <a href="classinet_1_1_l_mac.html#a91af0eaae371a9fe08383163970f4b61">More...</a><br /></td></tr>
<tr class="separator:a91af0eaae371a9fe08383163970f4b61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa43e98b70518667832a3b7c57389b088"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classinet_1_1_mac_address.html">MacAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#aa43e98b70518667832a3b7c57389b088">LMAC_FREE_SLOT</a></td></tr>
<tr class="separator:aa43e98b70518667832a3b7c57389b088"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ac5ad28f9cf3ccf4397ad0c2b8a755525"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#ac5ad28f9cf3ccf4397ad0c2b8a755525">LMac</a> (const <a class="el" href="classinet_1_1_l_mac.html">LMac</a> &amp;)</td></tr>
<tr class="memdesc:ac5ad28f9cf3ccf4397ad0c2b8a755525"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy constructor is not allowed.  <a href="classinet_1_1_l_mac.html#ac5ad28f9cf3ccf4397ad0c2b8a755525">More...</a><br /></td></tr>
<tr class="separator:ac5ad28f9cf3ccf4397ad0c2b8a755525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b3f60ba697cfa33cb3dac8713a7ca8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinet_1_1_l_mac.html">LMac</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classinet_1_1_l_mac.html#a6b3f60ba697cfa33cb3dac8713a7ca8e">operator=</a> (const <a class="el" href="classinet_1_1_l_mac.html">LMac</a> &amp;)</td></tr>
<tr class="memdesc:a6b3f60ba697cfa33cb3dac8713a7ca8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assignment operator is not allowed.  <a href="classinet_1_1_l_mac.html#a6b3f60ba697cfa33cb3dac8713a7ca8e">More...</a><br /></td></tr>
<tr class="separator:a6b3f60ba697cfa33cb3dac8713a7ca8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of L-MAC (Lightweight Medium Access <a class="el" href="classinet_1_1_protocol.html">Protocol</a> for Wireless Sensor Networks [van Hoesel 04] ). </p>
<p>Each node has its own unique timeslot. Nodes can use their timeslots to transfer data without having to contend for the medium or having to deal with energy wasting collisions or retransmissions.</p>
<p>During the first 5 full frames nodes will be waking up every controlDuration to setup the network first by assigning a different timeslot to each node. Normal packets will be queued, but will be send only after the setup phase.</p>
<p>During its timeslot a node wakes up, checks the channel for a short random period (CCA) to check for possible collision in the slot and, if the channel is free, sends a control packet. If there is a collision it tries to change its timeslot to an empty one. After the transmission of the control packet it checks its packet queue and if its non-empty it sends a data packet.</p>
<p>During a foreign timeslot a node wakes up, checks the channel for 2*controlDuration period for an incoming control packet and if there in nothing it goes back to sleep and conserves energy for the rest of the timeslot. If it receives a control packet addressed for itself it stays awake for the rest of the timeslot to receive the incoming data packet.</p>
<p>The finite state machine of the protocol is given in the below figure:</p>
<div class="image">
<img src="LMACFSM.jpg" alt=""/>
<div class="caption">
State chart for LMAC layer</div></div>
<p>A paper describing the protocol is:</p>
<p>L. van Hoesel and P. Havinga. A lightweight medium access protocol (LMAC) for wireless sensor networks. In Proceedings of the 3rd International Symposium on Information Processing in Sensor Networks (IPSN), pages 55-60, Berkeley, CA, February 2004. April. </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="ab261282b797df23143e81ba5ef478b38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab261282b797df23143e81ba5ef478b38">&#9670;&nbsp;</a></span>States</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38">inet::LMac::States</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>MAC states. </p>
<p>The MAC states help to keep track what the MAC is actually trying to do &ndash; this is esp. useful when radio switching takes some time. SLEEP &ndash; the node sleeps but accepts packets from the network layer RX &ndash; MAC accepts packets from PHY layer TX &ndash; MAC transmits a packet CCA &ndash; Clear Channel Assessment - MAC checks whether medium is busy </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ab261282b797df23143e81ba5ef478b38ad0dfc539acde109b07bba7202c869ed7"></a>INIT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7"></a>SLEEP&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab261282b797df23143e81ba5ef478b38a339bbb708ab398df5e2bebe58b82c2fc"></a>CCA&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab261282b797df23143e81ba5ef478b38a01011b1d79aa44f7751103e86a6e4454"></a>WAIT_CONTROL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab261282b797df23143e81ba5ef478b38afa6102c2bdab3d3103012eace108d9ed"></a>WAIT_DATA&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab261282b797df23143e81ba5ef478b38aef3442d2c210194c37f03cad691df2c2"></a>SEND_CONTROL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab261282b797df23143e81ba5ef478b38a0e816e73b90c713cebf169bb56de39e5"></a>SEND_DATA&#160;</td><td class="fielddoc"></td></tr>
</table>
<div class="fragment"><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38ad0dfc539acde109b07bba7202c869ed7">INIT</a>, <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7">SLEEP</a>, <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a339bbb708ab398df5e2bebe58b82c2fc">CCA</a>, <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a01011b1d79aa44f7751103e86a6e4454">WAIT_CONTROL</a>, <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38afa6102c2bdab3d3103012eace108d9ed">WAIT_DATA</a>, <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38aef3442d2c210194c37f03cad691df2c2">SEND_CONTROL</a>, <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a0e816e73b90c713cebf169bb56de39e5">SEND_DATA</a></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    };</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac5ad28f9cf3ccf4397ad0c2b8a755525"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5ad28f9cf3ccf4397ad0c2b8a755525">&#9670;&nbsp;</a></span>LMac() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">inet::LMac::LMac </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classinet_1_1_l_mac.html">LMac</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy constructor is not allowed. </p>

</div>
</div>
<a id="abe8555f759039c3affed35f9a0bcd3ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe8555f759039c3affed35f9a0bcd3ea">&#9670;&nbsp;</a></span>LMac() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">inet::LMac::LMac </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        : <a class="code" href="classinet_1_1_mac_protocol_base.html#a9b65875967a869921cd0ba8d99671c95">MacProtocolBase</a>()</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">SETUP_PHASE</a>(<span class="keyword">true</span>)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a1c4374dec84f49e4bf7d40ad236275b1">slotChange</a>()</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a>()</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">slotDuration</a>(0)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a31f2110dc7a2fe38de7ef6ab1cc96f20">headerLength</a>(<a class="code" href="namespaceinet_1_1units_1_1values.html#a02f32b4417da580f5e348f2c3cfb40a7">b</a>(0))</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#ab9676a8ac2c1672fd72192ce5c7f05a5">ctrlFrameLength</a>(<a class="code" href="namespaceinet_1_1units_1_1values.html#a02f32b4417da580f5e348f2c3cfb40a7">b</a>(0))</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a8e6bee0ad735aa6a73193043367d8e71">controlDuration</a>(0)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a50659b070d103e512b0ae66dd04fa419">myId</a>(0)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>(0)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>(0)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#ac5410823cbad246023b701beba853785">currSlot</a>()</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#ac69fe9a1e6950931d169bd1f5746adfe">reservedMobileSlots</a>(0)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a9384a418719092ce561351e5cfa05fdd">transmissionState</a>(<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#ac7d3c2a56d709c5d038dc7dff4d97159a9b8c95ba91ad3269b67014f4bfae83b2">physicallayer::IRadio::TRANSMISSION_STATE_UNDEFINED</a>)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">wakeup</a>(<span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>(<span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#af44b69395285bbb7b9df2546e9ea4345">sendData</a>(<span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#aec4d39b176fb0c4ec55af82ff08d475e">initChecker</a>(<span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a90a8d86e6c3e900c2782dc25a79f0d17">checkChannel</a>(<span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a066a6998a29eb65099f158d1c77ef35a">start_lmac</a>(<span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a683b18b11632f14f79b40e00373665a9">send_control</a>(<span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        , <a class="code" href="classinet_1_1_l_mac.html#a6e842919c523c5b07926d0d58ef3345c">bitrate</a>(0)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    {}</div>
</div><!-- fragment -->
</div>
</div>
<a id="acea9d66f4fff463c6b4a988f413eb600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acea9d66f4fff463c6b4a988f413eb600">&#9670;&nbsp;</a></span>~LMac()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">inet::LMac::~LMac </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clean up messges. </p>
<div class="fragment"><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;{</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keyword">delete</span> <a class="code" href="classinet_1_1_l_mac.html#a1c4374dec84f49e4bf7d40ad236275b1">slotChange</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    cancelAndDelete(<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    cancelAndDelete(<a class="code" href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">wakeup</a>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    cancelAndDelete(<a class="code" href="classinet_1_1_l_mac.html#a90a8d86e6c3e900c2782dc25a79f0d17">checkChannel</a>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    cancelAndDelete(<a class="code" href="classinet_1_1_l_mac.html#af44b69395285bbb7b9df2546e9ea4345">sendData</a>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    cancelAndDelete(<a class="code" href="classinet_1_1_l_mac.html#aec4d39b176fb0c4ec55af82ff08d475e">initChecker</a>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    cancelAndDelete(<a class="code" href="classinet_1_1_l_mac.html#a066a6998a29eb65099f158d1c77ef35a">start_lmac</a>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    cancelAndDelete(<a class="code" href="classinet_1_1_l_mac.html#a683b18b11632f14f79b40e00373665a9">send_control</a>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a43c569acb00ef8b17ee8a241d7d92b5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43c569acb00ef8b17ee8a241d7d92b5c">&#9670;&nbsp;</a></span>attachSignal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::LMac::attachSignal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinet_1_1_packet.html">Packet</a> *&#160;</td>
          <td class="paramname"><em>macPkt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal function to attach a signal to the packet. </p>
<div class="fragment"><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;{</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="comment">// calc signal duration</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    simtime_t duration = macPkt-&gt;getBitLength() / <a class="code" href="classinet_1_1_l_mac.html#a6e842919c523c5b07926d0d58ef3345c">bitrate</a>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="comment">// create and initialize control info with new signal</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    macPkt-&gt;setDuration(duration);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a27c173ff0a4f2409939de17310b19227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27c173ff0a4f2409939de17310b19227">&#9670;&nbsp;</a></span>configureNetworkInterface()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::LMac::configureNetworkInterface </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate new interface address. </p>

<p>Implements <a class="el" href="classinet_1_1_mac_protocol_base.html#ad73fadfe99dfba9f3fb75da70dc2f8e2">inet::MacProtocolBase</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    MacAddress address = <a class="code" href="classinet_1_1_mac_protocol_base.html#ac2b8274ca4fce4b210b1c523927ad5a4">parseMacAddressParameter</a>(par(<span class="stringliteral">&quot;address&quot;</span>));</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// data rate</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="classinet_1_1_mac_protocol_base.html#a1bdd471f869ccf0ea716e8bce60bdada">networkInterface</a>-&gt;setDatarate(<a class="code" href="classinet_1_1_l_mac.html#a6e842919c523c5b07926d0d58ef3345c">bitrate</a>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// generate a link-layer address to be used as interface token for IPv6</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="classinet_1_1_mac_protocol_base.html#a1bdd471f869ccf0ea716e8bce60bdada">networkInterface</a>-&gt;setMacAddress(address);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="classinet_1_1_mac_protocol_base.html#a1bdd471f869ccf0ea716e8bce60bdada">networkInterface</a>-&gt;setInterfaceToken(address.formInterfaceIdentifier());</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// capabilities</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="classinet_1_1_mac_protocol_base.html#a1bdd471f869ccf0ea716e8bce60bdada">networkInterface</a>-&gt;setMtu(par(<span class="stringliteral">&quot;mtu&quot;</span>));</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="classinet_1_1_mac_protocol_base.html#a1bdd471f869ccf0ea716e8bce60bdada">networkInterface</a>-&gt;setMulticast(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="classinet_1_1_mac_protocol_base.html#a1bdd471f869ccf0ea716e8bce60bdada">networkInterface</a>-&gt;setBroadcast(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e2100f5496ff39cce8873e1e981340f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e2100f5496ff39cce8873e1e981340f">&#9670;&nbsp;</a></span>decapsulate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::LMac::decapsulate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinet_1_1_packet.html">Packet</a> *&#160;</td>
          <td class="paramname"><em>packet</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;{</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; lmacHeader = packet-&gt;popAtFront&lt;LMacDataFrameHeader&gt;();</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    packet-&gt;addTagIfAbsent&lt;MacAddressInd&gt;()-&gt;setSrcAddress(lmacHeader-&gt;getSrcAddr());</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    packet-&gt;addTagIfAbsent&lt;InterfaceInd&gt;()-&gt;setInterfaceId(<a class="code" href="classinet_1_1_mac_protocol_base.html#a1bdd471f869ccf0ea716e8bce60bdada">networkInterface</a>-&gt;getInterfaceId());</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keyword">auto</span> payloadProtocol = <a class="code" href="classinet_1_1_protocol_group.html#a59ecb79a79d2ff5f29477007d999822b">ProtocolGroup::ethertype</a>.<a class="code" href="classinet_1_1_protocol_group.html#a40de7db32f5ec6281d6fa3b454335e22">getProtocol</a>(lmacHeader-&gt;getNetworkProtocol());</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    packet-&gt;addTagIfAbsent&lt;<a class="code" href="_i_udp-gates_8txt.html#a0323ac93ca7b779d82d9fb23cd4c8681">DispatchProtocolReq</a>&gt;()-&gt;setProtocol(payloadProtocol);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    packet-&gt;addTagIfAbsent&lt;<a class="code" href="_i_udp-gates_8txt.html#afd36d0627e26925acd433b1dd1fdd2bc">PacketProtocolTag</a>&gt;()-&gt;setProtocol(payloadProtocol);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    packet-&gt;setKind(0);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot; message decapsulated &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5fd8bb0a4c396a0c5002ffd84cedd845"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fd8bb0a4c396a0c5002ffd84cedd845">&#9670;&nbsp;</a></span>encapsulate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::LMac::encapsulate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinet_1_1_packet.html">Packet</a> *&#160;</td>
          <td class="paramname"><em>netwPkt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Encapsulate the NetwPkt into an MacPkt. </p>
<p>Encapsulates the received network-layer packet into a MacPkt and set all needed header fields. </p>
<div class="fragment"><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;{</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keyword">auto</span> pkt = makeShared&lt;LMacDataFrameHeader&gt;();</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    pkt-&gt;setChunkLength(<a class="code" href="classinet_1_1_l_mac.html#a31f2110dc7a2fe38de7ef6ab1cc96f20">headerLength</a>);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="comment">// copy dest address from the Control Info attached to the network</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="comment">// message by the network layer</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keyword">auto</span> dest = netwPkt-&gt;getTag&lt;MacAddressReq&gt;()-&gt;getDestAddress();</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;CInfo removed, mac addr=&quot;</span> &lt;&lt; dest &lt;&lt; endl;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    pkt-&gt;setDestAddr(dest);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    pkt-&gt;setNetworkProtocol(<a class="code" href="classinet_1_1_protocol_group.html#a59ecb79a79d2ff5f29477007d999822b">ProtocolGroup::ethertype</a>.getProtocolNumber(netwPkt-&gt;getTag&lt;<a class="code" href="_i_udp-gates_8txt.html#afd36d0627e26925acd433b1dd1fdd2bc">PacketProtocolTag</a>&gt;()-&gt;getProtocol()));</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment">// delete the control info</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keyword">delete</span> netwPkt-&gt;removeControlInfo();</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="comment">// set the src address to own mac address (nic module getId())</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    pkt-&gt;setSrcAddr(<a class="code" href="classinet_1_1_mac_protocol_base.html#a1bdd471f869ccf0ea716e8bce60bdada">networkInterface</a>-&gt;getMacAddress());</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">// encapsulate the network packet</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    netwPkt-&gt;insertAtFront(pkt);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;pkt encapsulated\n&quot;</span>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4b0ba3c11729879f585879380bb2917"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4b0ba3c11729879f585879380bb2917">&#9670;&nbsp;</a></span>findNewSlot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::LMac::findNewSlot </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>find a new slot </p>
<p>Try to find a new slot after collision.</p>
<p>If not possible, set own slot to -1 (not able to send anything) </p>
<div class="fragment"><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;{</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">// pick a random slot at the beginning and schedule the next wakeup</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="comment">// free the old one first</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordtype">int</span> counter = 0;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> = intrand((<a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a> - <a class="code" href="classinet_1_1_l_mac.html#ac69fe9a1e6950931d169bd1f5746adfe">reservedMobileSlots</a>));</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">while</span> ((<a class="code" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a>[<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>] != <a class="code" href="classinet_1_1_l_mac.html#aa43e98b70518667832a3b7c57389b088">LMAC_FREE_SLOT</a>) &amp;&amp; (counter &lt; (<a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a> - <a class="code" href="classinet_1_1_l_mac.html#ac69fe9a1e6950931d169bd1f5746adfe">reservedMobileSlots</a>))) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        counter++;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>--;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> &lt; 0)</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> = (<a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a> - <a class="code" href="classinet_1_1_l_mac.html#ac69fe9a1e6950931d169bd1f5746adfe">reservedMobileSlots</a>) - 1;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a>[<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>] != <a class="code" href="classinet_1_1_l_mac.html#aa43e98b70518667832a3b7c57389b088">LMAC_FREE_SLOT</a>) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        EV &lt;&lt; <span class="stringliteral">&quot;ERROR: I cannot find a free slot. Cannot send data.\n&quot;</span>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> = -1;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        EV &lt;&lt; <span class="stringliteral">&quot;ERROR: My new slot is : &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    EV &lt;&lt; <span class="stringliteral">&quot;ERROR: I needed to find new slot\n&quot;</span>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="classinet_1_1_l_mac.html#a1c4374dec84f49e4bf7d40ad236275b1">slotChange</a>-&gt;recordWithTimestamp(simTime(), <a class="code" href="classinet_1_1_find_module.html#ac97ae5e6278e8496ca517754649a0b97">FindModule&lt;&gt;::findHost</a>(<span class="keyword">this</span>)-&gt;getId() - 4);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1958e6535c94298cf5e4e1181670fa6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1958e6535c94298cf5e4e1181670fa6a">&#9670;&nbsp;</a></span>getProvider()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinet_1_1queueing_1_1_i_passive_packet_source.html">queueing::IPassivePacketSource</a> * inet::LMac::getProvider </td>
          <td>(</td>
          <td class="paramtype">cGate *&#160;</td>
          <td class="paramname"><em>gate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the passive packet source from where packets are pulled or nullptr if the connected module doesn't implement the interface. </p>
<p>The gate parameter must be a valid gate of this module. </p>

<p>Implements <a class="el" href="classinet_1_1queueing_1_1_i_active_packet_sink.html#a8c5eee25d2e4a5457ddb18ebcb8b29b6">inet::queueing::IActivePacketSink</a>.</p>
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">return</span> (gate-&gt;getId() == <a class="code" href="classinet_1_1_mac_protocol_base.html#aa15d2ec2832daffdd6982a67bd5407f1">upperLayerInGateId</a>) ? <a class="code" href="classinet_1_1_mac_protocol_base.html#a1f66409a3316782d68ab967eb1cff36a">txQueue</a>.get() : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ade43433d83733cc2cef66f9ada7f72ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade43433d83733cc2cef66f9ada7f72ec">&#9670;&nbsp;</a></span>handleCanPullPacketChanged()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::LMac::handleCanPullPacketChanged </td>
          <td>(</td>
          <td class="paramtype">cGate *&#160;</td>
          <td class="paramname"><em>gate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Notifies about a change in the possibility of pulling some packet from the passive packet source at the given gate. </p>
<p>This method is called, for example, when a new packet is inserted into a queue. It allows the sink to pull a new packet from the queue.</p>
<p>The gate parameter must be a valid gate of this module. </p>

<p>Implements <a class="el" href="classinet_1_1queueing_1_1_i_active_packet_sink.html#a02edcb2ad77e915a8bbdec3182ede2fc">inet::queueing::IActivePacketSink</a>.</p>
<div class="fragment"><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;{</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <a class="code" href="_self_doc_8h.html#a8e54030c665b5254da268db865fccdfc">Enter_Method</a>(<span class="stringliteral">&quot;handleCanPullPacketChanged&quot;</span>);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">// packed arrived from upper layer</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af62b278aeb39bda85f2510825a35ae93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af62b278aeb39bda85f2510825a35ae93">&#9670;&nbsp;</a></span>handleCommand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void inet::LMac::handleCommand </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad9b458fbc381437d27fdd77b3b125d57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9b458fbc381437d27fdd77b3b125d57">&#9670;&nbsp;</a></span>handleLowerPacket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::LMac::handleLowerPacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinet_1_1_packet.html">Packet</a> *&#160;</td>
          <td class="paramname"><em>packet</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle messages from lower layer. </p>
<p>Handle LMAC control packets and data packets.</p>
<p>Recognize collisions, change own slot if necessary and remember who is using which slot. </p>

<p>Reimplemented from <a class="el" href="classinet_1_1_layered_protocol_base.html#a8ccdd82466be10df5af7d3cf772289d0">inet::LayeredProtocolBase</a>.</p>
<div class="fragment"><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;{</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">if</span> (packet-&gt;hasBitError()) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        EV &lt;&lt; <span class="stringliteral">&quot;Received &quot;</span> &lt;&lt; packet &lt;&lt; <span class="stringliteral">&quot; contains bit errors or collision, dropping it\n&quot;</span>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        PacketDropDetails details;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        details.setReason(<a class="code" href="namespaceinet.html#a9c0ecf85d82481d6058caaee2e4a41d9a0c2387c9889a3ea0e5202c25d5027a2a">INCORRECTLY_RECEIVED</a>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        emit(<a class="code" href="namespaceinet.html#a8b3e6258ad8d45309159a6bb395946f7">packetDroppedSignal</a>, packet, &amp;details);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="keyword">delete</span> packet;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">// simply pass the massage as self message, to be processed by the FSM.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; hdr = packet-&gt;peekAtFront&lt;LMacHeaderBase&gt;();</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    packet-&gt;setKind(hdr-&gt;getType());</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="classinet_1_1_l_mac.html#a79b45d4d3072c97cba5acf99fc9043fd">handleSelfMessage</a>(packet);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa9d51f2e2d16f4307a9f6bfed997948a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9d51f2e2d16f4307a9f6bfed997948a">&#9670;&nbsp;</a></span>handlePullPacketProcessed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::LMac::handlePullPacketProcessed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinet_1_1_packet.html">Packet</a> *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cGate *&#160;</td>
          <td class="paramname"><em>gate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>successful</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Notifies about the completion of the packet processing for a packet that was pulled earlier independently whether the packet is passed or streamed. </p>
<p>This method is called, for example, when a previously pulled packet is failed to be processed successfully. It allows the sink to retry the operation.</p>
<p>The gate parameter must be a valid gate of this module. The packet must not be nullptr. </p>

<p>Implements <a class="el" href="classinet_1_1queueing_1_1_i_active_packet_sink.html#a8cdb31c4869e7121e3207437662b4f45">inet::queueing::IActivePacketSink</a>.</p>
<div class="fragment"><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;{</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <a class="code" href="_self_doc_8h.html#a8e54030c665b5254da268db865fccdfc">Enter_Method</a>(<span class="stringliteral">&quot;handlePullPacketProcessed&quot;</span>);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Not supported callback&quot;</span>);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a79b45d4d3072c97cba5acf99fc9043fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79b45d4d3072c97cba5acf99fc9043fd">&#9670;&nbsp;</a></span>handleSelfMessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::LMac::handleSelfMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle self messages such as timers. </p>
<p>Handle self messages: LMAC_SETUP_PHASE_END: end of setup phase.</p>
<p>Change slot duration to normal and start sending data packets. The slots of the nodes should be stable now. LMAC_SEND_DATA: send the data packet. LMAC_CHECK_CHANNEL: check the channel in own slot. If busy, change the slot. If not, send a control packet. LMAC_WAKEUP: wake up the node and either check the channel before sending a control packet or wait for control packets. LMAC_TIMEOUT: go back to sleep after nothing happened. </p>

<p>Reimplemented from <a class="el" href="classinet_1_1_layered_protocol_base.html#a1092e904484f4016b2d04ab322f4f363">inet::LayeredProtocolBase</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    MacAddress address = <a class="code" href="classinet_1_1_mac_protocol_base.html#a1bdd471f869ccf0ea716e8bce60bdada">networkInterface</a>-&gt;getMacAddress();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a>) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38ad0dfc539acde109b07bba7202c869ed7">INIT</a>:</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a9f269aba0684f024446694981ead5058">LMAC_START_LMAC</a>) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                <span class="comment">// the first 5 full slots we will be waking up every controlDuration to setup the network first</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                <span class="comment">// normal packets will be queued, but will be send only after the setup phase</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                scheduleAfter(<a class="code" href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">slotDuration</a> * 5 * <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>, <a class="code" href="classinet_1_1_l_mac.html#aec4d39b176fb0c4ec55af82ff08d475e">initChecker</a>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                EV &lt;&lt; <span class="stringliteral">&quot;Startup time =&quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">slotDuration</a> * 5 * <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Scheduling the first wakeup at : &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">slotDuration</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                scheduleAfter(<a class="code" href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">slotDuration</a>, <a class="code" href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">wakeup</a>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>; i++) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">occSlotsDirect</a>[i] = <a class="code" href="classinet_1_1_l_mac.html#aa43e98b70518667832a3b7c57389b088">LMAC_FREE_SLOT</a>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a>[i] = <a class="code" href="classinet_1_1_l_mac.html#aa43e98b70518667832a3b7c57389b088">LMAC_FREE_SLOT</a>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a50659b070d103e512b0ae66dd04fa419">myId</a> &gt;= <a class="code" href="classinet_1_1_l_mac.html#ac69fe9a1e6950931d169bd1f5746adfe">reservedMobileSlots</a>)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> = ((int)<a class="code" href="classinet_1_1_find_module.html#ac97ae5e6278e8496ca517754649a0b97">FindModule&lt;&gt;::findHost</a>(<span class="keyword">this</span>)-&gt;getId()) % (<a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a> - <a class="code" href="classinet_1_1_l_mac.html#ac69fe9a1e6950931d169bd1f5746adfe">reservedMobileSlots</a>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> = <a class="code" href="classinet_1_1_l_mac.html#a50659b070d103e512b0ae66dd04fa419">myId</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">//                occSlotsDirect[mySlot] = address;</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">//                occSlotsAway[mySlot] = address;</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#ac5410823cbad246023b701beba853785">currSlot</a> = 0;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;ID: &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_find_module.html#ac97ae5e6278e8496ca517754649a0b97">FindModule&lt;&gt;::findHost</a>(<span class="keyword">this</span>)-&gt;getId() &lt;&lt; <span class="stringliteral">&quot;. Picked random slot: &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7">SLEEP</a>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: INIT, New state: SLEEP&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">SETUP_PHASE</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                EV &lt;&lt; <span class="stringliteral">&quot;Unknown packet&quot;</span> &lt;&lt; msg-&gt;getKind() &lt;&lt; <span class="stringliteral">&quot;in state&quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7">SLEEP</a>:</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a790c59626ffb23669124a917458715de">LMAC_WAKEUP</a>) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#ac5410823cbad246023b701beba853785">currSlot</a>++;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#ac5410823cbad246023b701beba853785">currSlot</a> %= <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;New slot starting - No. &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#ac5410823cbad246023b701beba853785">currSlot</a> &lt;&lt; <span class="stringliteral">&quot;, my slot is &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> == <a class="code" href="classinet_1_1_l_mac.html#ac5410823cbad246023b701beba853785">currSlot</a>) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Waking up in my slot. Switch to RECV first to check the channel.\n&quot;</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a339bbb708ab398df5e2bebe58b82c2fc">CCA</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">radio</a>-&gt;setRadioMode(<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0abaf50d0dfad7c8aba08b05d4afbab7adb1">IRadio::RADIO_MODE_RECEIVER</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: SLEEP, New state: CCA&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                    <span class="keywordtype">double</span> small_delay = <a class="code" href="classinet_1_1_l_mac.html#a8e6bee0ad735aa6a73193043367d8e71">controlDuration</a> * dblrand();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    scheduleAfter(small_delay, <a class="code" href="classinet_1_1_l_mac.html#a90a8d86e6c3e900c2782dc25a79f0d17">checkChannel</a>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Checking for channel for &quot;</span> &lt;&lt; small_delay &lt;&lt; <span class="stringliteral">&quot; time.\n&quot;</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Waking up in a foreign slot. Ready to receive control packet.\n&quot;</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a01011b1d79aa44f7751103e86a6e4454">WAIT_CONTROL</a>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">radio</a>-&gt;setRadioMode(<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0abaf50d0dfad7c8aba08b05d4afbab7adb1">IRadio::RADIO_MODE_RECEIVER</a>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: SLEEP, New state: WAIT_CONTROL&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">SETUP_PHASE</a>) <span class="comment">// in setup phase do not sleep</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                        scheduleAfter(2.f * <a class="code" href="classinet_1_1_l_mac.html#a8e6bee0ad735aa6a73193043367d8e71">controlDuration</a>, <a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">SETUP_PHASE</a>) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    scheduleAfter(2.f * <a class="code" href="classinet_1_1_l_mac.html#a8e6bee0ad735aa6a73193043367d8e71">controlDuration</a>, <a class="code" href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">wakeup</a>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;setup phase slot duration:&quot;</span> &lt;&lt; 2.f * <a class="code" href="classinet_1_1_l_mac.html#a8e6bee0ad735aa6a73193043367d8e71">controlDuration</a> &lt;&lt; <span class="stringliteral">&quot;while controlduration is&quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a8e6bee0ad735aa6a73193043367d8e71">controlDuration</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    scheduleAfter(<a class="code" href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">slotDuration</a>, <a class="code" href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">wakeup</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a1464fec03fb5e043147e1bd592549969">LMAC_SETUP_PHASE_END</a>) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Setup phase end. Start normal work at the next slot.\n&quot;</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                rescheduleAfter(<a class="code" href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">slotDuration</a>, <a class="code" href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">wakeup</a>);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">SETUP_PHASE</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                EV &lt;&lt; <span class="stringliteral">&quot;Unknown packet&quot;</span> &lt;&lt; msg-&gt;getKind() &lt;&lt; <span class="stringliteral">&quot;in state&quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a339bbb708ab398df5e2bebe58b82c2fc">CCA</a>:</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98ab551445f1b1455a3f956bac71d22043a">LMAC_CHECK_CHANNEL</a>) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                <span class="comment">// if the channel is clear, get ready for sending the control packet</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                EV &lt;&lt; <span class="stringliteral">&quot;Channel is free, so let&#39;s prepare for sending.\n&quot;</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38aef3442d2c210194c37f03cad691df2c2">SEND_CONTROL</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">radio</a>-&gt;setRadioMode(<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0aba6ed69d32c284dd85069be7f141f24e2f">IRadio::RADIO_MODE_TRANSMITTER</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: CCA, New state: SEND_CONTROL&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98ad0d4e21c6224ebcca3649e2dfa6a00e1">LMAC_CONTROL</a>) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                <span class="keyword">auto</span> packet = check_and_cast&lt;Packet *&gt;(msg);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                <span class="keyword">const</span> <span class="keyword">auto</span>&amp; lmacHeader = packet-&gt;peekAtFront&lt;LMacControlFrame&gt;();</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                <span class="keyword">const</span> MacAddress&amp; dest = lmacHeader-&gt;getDestAddr();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot; I have received a control packet from src &quot;</span> &lt;&lt; lmacHeader-&gt;getSrcAddr() &lt;&lt; <span class="stringliteral">&quot; and dest &quot;</span> &lt;&lt; dest &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <span class="keywordtype">bool</span> collision = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="comment">// if we are listening to the channel and receive anything, there is a collision in the slot.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a90a8d86e6c3e900c2782dc25a79f0d17">checkChannel</a>-&gt;isScheduled()) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                    cancelEvent(<a class="code" href="classinet_1_1_l_mac.html#a90a8d86e6c3e900c2782dc25a79f0d17">checkChannel</a>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    collision = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a> = 0; <a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a> &lt; <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>; <a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a>++) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a>[<a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a>] = lmacHeader-&gt;getOccupiedSlots(<a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Occupied slot &quot;</span> &lt;&lt; <a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a>[<a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a>] &lt;&lt; endl;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Occupied direct slot &quot;</span> &lt;&lt; <a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">occSlotsDirect</a>[<a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a>] &lt;&lt; endl;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="keywordflow">if</span> (lmacHeader-&gt;getMySlot() &gt; -1) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                    <span class="comment">// check first whether this address didn&#39;t have another occupied slot and free it again</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>; i++) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">occSlotsDirect</a>[i] == lmacHeader-&gt;getSrcAddr())</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                            <a class="code" href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">occSlotsDirect</a>[i] = <a class="code" href="classinet_1_1_l_mac.html#aa43e98b70518667832a3b7c57389b088">LMAC_FREE_SLOT</a>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a>[i] == lmacHeader-&gt;getSrcAddr())</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                            <a class="code" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a>[i] = <a class="code" href="classinet_1_1_l_mac.html#aa43e98b70518667832a3b7c57389b088">LMAC_FREE_SLOT</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                    }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a>[lmacHeader-&gt;getMySlot()] = lmacHeader-&gt;getSrcAddr();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">occSlotsDirect</a>[lmacHeader-&gt;getMySlot()] = lmacHeader-&gt;getSrcAddr();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                collision = collision || (lmacHeader-&gt;getMySlot() == <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordflow">if</span> (((<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> &gt; -1) &amp;&amp; (lmacHeader-&gt;getOccupiedSlots(<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>) &gt; <a class="code" href="classinet_1_1_l_mac.html#aa43e98b70518667832a3b7c57389b088">LMAC_FREE_SLOT</a>) &amp;&amp; (lmacHeader-&gt;getOccupiedSlots(<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>) != address)) || collision) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;My slot is taken by &quot;</span> &lt;&lt; lmacHeader-&gt;getOccupiedSlots(<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>) &lt;&lt; <span class="stringliteral">&quot;. I need to change it.\n&quot;</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#ac4b0ba3c11729879f585879380bb2917">findNewSlot</a>();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;My new slot is &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> &lt; 0) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;I don;t have a slot - try to find one.\n&quot;</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#ac4b0ba3c11729879f585879380bb2917">findNewSlot</a>();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                <span class="keywordflow">if</span> (dest == address || dest.isBroadcast()) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;I need to stay awake.\n&quot;</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>-&gt;isScheduled())</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                        cancelEvent(<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38afa6102c2bdab3d3103012eace108d9ed">WAIT_DATA</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: CCA, New state: WAIT_DATA&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Incoming data packet not for me. Going back to sleep.\n&quot;</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7">SLEEP</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: CCA, New state: SLEEP&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">radio</a>-&gt;setRadioMode(<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0abacfd8d0669b562782d549518d17c36c58">IRadio::RADIO_MODE_SLEEP</a>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>-&gt;isScheduled())</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                        cancelEvent(<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <span class="keyword">delete</span> packet;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="comment">// probably it never happens</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98af1f1fed5e183753ba8a2d42fba67dcf9">LMAC_DATA</a>) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                <span class="keyword">auto</span> packet = check_and_cast&lt;Packet *&gt;(msg);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <span class="keyword">const</span> MacAddress&amp; dest = packet-&gt;peekAtFront&lt;LMacDataFrameHeader&gt;()-&gt;getDestAddr();</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">//                bool collision = false;</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                <span class="comment">// if we are listening to the channel and receive anything, there is a collision in the slot.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a90a8d86e6c3e900c2782dc25a79f0d17">checkChannel</a>-&gt;isScheduled()) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                    cancelEvent(<a class="code" href="classinet_1_1_l_mac.html#a90a8d86e6c3e900c2782dc25a79f0d17">checkChannel</a>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">//                    collision = true;</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot; I have received a data packet.\n&quot;</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <span class="keywordflow">if</span> (dest == address || dest.isBroadcast()) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;sending pkt to upper...\n&quot;</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a7e2100f5496ff39cce8873e1e981340f">decapsulate</a>(packet);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    <a class="code" href="classinet_1_1_mac_protocol_base.html#a0e58fc4637c4d7b3b1b5052d2b5d514f">sendUp</a>(packet);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;packet not for me, deleting...\n&quot;</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                    PacketDropDetails details;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                    details.setReason(<a class="code" href="namespaceinet.html#a9c0ecf85d82481d6058caaee2e4a41d9a88c381fd51291e1e9ab716cf93d7a3a2">NOT_ADDRESSED_TO_US</a>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                    emit(<a class="code" href="namespaceinet.html#a8b3e6258ad8d45309159a6bb395946f7">packetDroppedSignal</a>, packet, &amp;details);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                    <span class="keyword">delete</span> packet;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <span class="comment">// in any case, go back to sleep</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7">SLEEP</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: CCA, New state: SLEEP&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">radio</a>-&gt;setRadioMode(<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0abacfd8d0669b562782d549518d17c36c58">IRadio::RADIO_MODE_SLEEP</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a1464fec03fb5e043147e1bd592549969">LMAC_SETUP_PHASE_END</a>) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Setup phase end. Start normal work at the next slot.\n&quot;</span>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                rescheduleAfter(<a class="code" href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">slotDuration</a>, <a class="code" href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">wakeup</a>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">SETUP_PHASE</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                EV &lt;&lt; <span class="stringliteral">&quot;Unknown packet&quot;</span> &lt;&lt; msg-&gt;getKind() &lt;&lt; <span class="stringliteral">&quot;in state&quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a01011b1d79aa44f7751103e86a6e4454">WAIT_CONTROL</a>:</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98ab1fb07569ea80bfc11d1d4d3c200b840">LMAC_TIMEOUT</a>) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Control timeout. Go back to sleep.\n&quot;</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7">SLEEP</a>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: WAIT_CONTROL, New state: SLEEP&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">radio</a>-&gt;setRadioMode(<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0abacfd8d0669b562782d549518d17c36c58">IRadio::RADIO_MODE_SLEEP</a>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98ad0d4e21c6224ebcca3649e2dfa6a00e1">LMAC_CONTROL</a>) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                <span class="keyword">auto</span> packet = check_and_cast&lt;Packet *&gt;(msg);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <span class="keyword">const</span> <span class="keyword">auto</span>&amp; lmacHeader = packet-&gt;peekAtFront&lt;LMacControlFrame&gt;();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <span class="keyword">const</span> MacAddress&amp; dest = lmacHeader-&gt;getDestAddr();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot; I have received a control packet from src &quot;</span> &lt;&lt; lmacHeader-&gt;getSrcAddr() &lt;&lt; <span class="stringliteral">&quot; and dest &quot;</span> &lt;&lt; dest &lt;&lt; <span class="stringliteral">&quot;.\n&quot;</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <span class="keywordtype">bool</span> collision = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                <span class="comment">// check first the slot assignment</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                <span class="comment">// copy the current slot assignment</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a> = 0; <a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a> &lt; <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>; <a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a>++) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a>[<a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a>] = lmacHeader-&gt;getOccupiedSlots(<a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Occupied slot &quot;</span> &lt;&lt; <a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a>[<a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a>] &lt;&lt; endl;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Occupied direct slot &quot;</span> &lt;&lt; <a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">occSlotsDirect</a>[<a class="code" href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">s</a>] &lt;&lt; endl;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <span class="keywordflow">if</span> (lmacHeader-&gt;getMySlot() &gt; -1) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                    <span class="comment">// check first whether this address didn&#39;t have another occupied slot and free it again</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>; i++) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">occSlotsDirect</a>[i] == lmacHeader-&gt;getSrcAddr())</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                            <a class="code" href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">occSlotsDirect</a>[i] = <a class="code" href="classinet_1_1_l_mac.html#aa43e98b70518667832a3b7c57389b088">LMAC_FREE_SLOT</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a>[i] == lmacHeader-&gt;getSrcAddr())</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                            <a class="code" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a>[i] = <a class="code" href="classinet_1_1_l_mac.html#aa43e98b70518667832a3b7c57389b088">LMAC_FREE_SLOT</a>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                    }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">occSlotsAway</a>[lmacHeader-&gt;getMySlot()] = lmacHeader-&gt;getSrcAddr();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">occSlotsDirect</a>[lmacHeader-&gt;getMySlot()] = lmacHeader-&gt;getSrcAddr();</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                collision = collision || (lmacHeader-&gt;getMySlot() == <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                <span class="keywordflow">if</span> (((<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> &gt; -1) &amp;&amp; (lmacHeader-&gt;getOccupiedSlots(<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>) &gt; <a class="code" href="classinet_1_1_l_mac.html#aa43e98b70518667832a3b7c57389b088">LMAC_FREE_SLOT</a>) &amp;&amp; (lmacHeader-&gt;getOccupiedSlots(<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>) != address)) || collision) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;My slot is taken by &quot;</span> &lt;&lt; lmacHeader-&gt;getOccupiedSlots(<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>) &lt;&lt; <span class="stringliteral">&quot;. I need to change it.\n&quot;</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#ac4b0ba3c11729879f585879380bb2917">findNewSlot</a>();</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;My new slot is &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a> &lt; 0) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;I don;t have a slot - try to find one.\n&quot;</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#ac4b0ba3c11729879f585879380bb2917">findNewSlot</a>();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                <span class="keywordflow">if</span> (dest == address || dest.isBroadcast()) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;I need to stay awake.\n&quot;</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38afa6102c2bdab3d3103012eace108d9ed">WAIT_DATA</a>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: WAIT_CONTROL, New state: WAIT_DATA&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>-&gt;isScheduled())</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                        cancelEvent(<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Incoming data packet not for me. Going back to sleep.\n&quot;</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7">SLEEP</a>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: WAIT_CONTROL, New state: SLEEP&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">radio</a>-&gt;setRadioMode(<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0abacfd8d0669b562782d549518d17c36c58">IRadio::RADIO_MODE_SLEEP</a>);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>-&gt;isScheduled())</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                        cancelEvent(<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                <span class="keyword">delete</span> packet;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a790c59626ffb23669124a917458715de">LMAC_WAKEUP</a>)) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">SETUP_PHASE</a> == <span class="keyword">true</span>)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;End of setup-phase slot&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Very unlikely transition&quot;</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7">SLEEP</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: WAIT_DATA, New state: SLEEP&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                scheduleAfter(SIMTIME_ZERO, <a class="code" href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">wakeup</a>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a1464fec03fb5e043147e1bd592549969">LMAC_SETUP_PHASE_END</a>) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Setup phase end. Start normal work at the next slot.\n&quot;</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                rescheduleAfter(<a class="code" href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">slotDuration</a>, <a class="code" href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">wakeup</a>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">SETUP_PHASE</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98af1f1fed5e183753ba8a2d42fba67dcf9">LMAC_DATA</a>) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                <span class="comment">// TODO review this delete, it&#39;s added to avoid a memory leak detected by Valgrind</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                <span class="keyword">delete</span> msg;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                EV &lt;&lt; <span class="stringliteral">&quot;Unknown packet&quot;</span> &lt;&lt; msg-&gt;getKind() &lt;&lt; <span class="stringliteral">&quot;in state&quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38aef3442d2c210194c37f03cad691df2c2">SEND_CONTROL</a>:</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a8e85100ddbd09040f6a026688bcbb19c">LMAC_SEND_CONTROL</a>) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">SETUP_PHASE</a> &amp;&amp; <a class="code" href="classinet_1_1_mac_protocol_base.html#a5a05ba95252550f1e27df46ea4052736">currentTxFrame</a> == <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classinet_1_1_mac_protocol_base.html#a9521795aacedfaa68ec24fe46c948c32">canDequeuePacket</a>()) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                    <a class="code" href="classinet_1_1_mac_protocol_base.html#a5a05ba95252550f1e27df46ea4052736">currentTxFrame</a> = <a class="code" href="classinet_1_1_mac_protocol_base.html#af77a5b0d9ca1b84d81c20efb2180a500">dequeuePacket</a>();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a5fd8bb0a4c396a0c5002ffd84cedd845">encapsulate</a>(<a class="code" href="classinet_1_1_mac_protocol_base.html#a5a05ba95252550f1e27df46ea4052736">currentTxFrame</a>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                <span class="comment">// send first a control message, so that non-receiving nodes can switch off.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                EV &lt;&lt; <span class="stringliteral">&quot;Sending a control packet.\n&quot;</span>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                <span class="keyword">auto</span> control = makeShared&lt;LMacControlFrame&gt;();</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_mac_protocol_base.html#a5a05ba95252550f1e27df46ea4052736">currentTxFrame</a> != <span class="keyword">nullptr</span> &amp;&amp; !<a class="code" href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">SETUP_PHASE</a>)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    control-&gt;setDestAddr(<a class="code" href="classinet_1_1_mac_protocol_base.html#a5a05ba95252550f1e27df46ea4052736">currentTxFrame</a>-&gt;<a class="code" href="classinet_1_1_packet.html#a6ac6d5abaa6d6d3f308874da9466dcb8">peekAtFront</a>&lt;LMacHeaderBase&gt;()-&gt;getDestAddr());</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                    control-&gt;setDestAddr(<a class="code" href="classinet_1_1_l_mac.html#a91af0eaae371a9fe08383163970f4b61">LMAC_NO_RECEIVER</a>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                control-&gt;setSrcAddr(address);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                control-&gt;setMySlot(<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                control-&gt;setChunkLength(<a class="code" href="classinet_1_1_l_mac.html#ab9676a8ac2c1672fd72192ce5c7f05a5">ctrlFrameLength</a> + <a class="code" href="namespaceinet_1_1units_1_1values.html#a02f32b4417da580f5e348f2c3cfb40a7">b</a>(<a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>)); <span class="comment">// FIXME check it: add only 1 bit / slot?</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                control-&gt;setOccupiedSlotsArraySize(<a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>; i++)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                    control-&gt;setOccupiedSlots(i, <a class="code" href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">occSlotsDirect</a>[i]);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                Packet *packet = <span class="keyword">new</span> Packet(<span class="stringliteral">&quot;Control&quot;</span>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                control-&gt;setType(<a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98ad0d4e21c6224ebcca3649e2dfa6a00e1">LMAC_CONTROL</a>);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                packet-&gt;insertAtFront(control);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                packet-&gt;addTag&lt;<a class="code" href="_i_udp-gates_8txt.html#afd36d0627e26925acd433b1dd1fdd2bc">PacketProtocolTag</a>&gt;()-&gt;setProtocol(&amp;<a class="code" href="classinet_1_1_protocol.html#a3cfc5e14a69c20bfaca0bb456cb72228">Protocol::lmac</a>);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                <a class="code" href="classinet_1_1_mac_protocol_base.html#abcd8fe1c33a039ec5e86fd1337cccc0f">sendDown</a>(packet);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="classinet_1_1_mac_protocol_base.html#a5a05ba95252550f1e27df46ea4052736">currentTxFrame</a> != <span class="keyword">nullptr</span>) &amp;&amp; (!<a class="code" href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">SETUP_PHASE</a>))</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    scheduleAfter(<a class="code" href="classinet_1_1_l_mac.html#a8e6bee0ad735aa6a73193043367d8e71">controlDuration</a>, <a class="code" href="classinet_1_1_l_mac.html#af44b69395285bbb7b9df2546e9ea4345">sendData</a>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a6a1543ac9a41ac7ed5f523f46e2cc41f">LMAC_SEND_DATA</a>) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                <span class="comment">// we should be in our own slot and the control packet should be already sent. receiving neighbors should wait for the data now.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#ac5410823cbad246023b701beba853785">currSlot</a> != <a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;ERROR: Send data message received, but we are not in our slot!!! Repair.\n&quot;</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">radio</a>-&gt;setRadioMode(<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0abacfd8d0669b562782d549518d17c36c58">IRadio::RADIO_MODE_SLEEP</a>);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>-&gt;isScheduled())</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                        cancelEvent(<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                Packet *data = <span class="keyword">new</span> Packet(<span class="stringliteral">&quot;Data&quot;</span>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <span class="keyword">const</span> <span class="keyword">auto</span>&amp; lmacHeader = <a class="code" href="classinet_1_1_mac_protocol_base.html#a5a05ba95252550f1e27df46ea4052736">currentTxFrame</a>-&gt;<a class="code" href="classinet_1_1_packet.html#a325240f10eb5a064224f8eaf2d7b5dc9">removeAtFront</a>&lt;LMacDataFrameHeader&gt;();</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                data-&gt;insertAtBack(<a class="code" href="classinet_1_1_mac_protocol_base.html#a5a05ba95252550f1e27df46ea4052736">currentTxFrame</a>-&gt;<a class="code" href="classinet_1_1_packet.html#abc89c28a84783010fbd6f16924cb244c">peekData</a>());</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                lmacHeader-&gt;setType(<a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98af1f1fed5e183753ba8a2d42fba67dcf9">LMAC_DATA</a>);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                lmacHeader-&gt;setMySlot(<a class="code" href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">mySlot</a>);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                lmacHeader-&gt;setOccupiedSlotsArraySize(<a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>; i++)</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                    lmacHeader-&gt;setOccupiedSlots(i, <a class="code" href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">occSlotsDirect</a>[i]);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160; </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                data-&gt;insertAtFront(lmacHeader);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                data-&gt;addTag&lt;<a class="code" href="_i_udp-gates_8txt.html#afd36d0627e26925acd433b1dd1fdd2bc">PacketProtocolTag</a>&gt;()-&gt;setProtocol(&amp;<a class="code" href="classinet_1_1_protocol.html#a3cfc5e14a69c20bfaca0bb456cb72228">Protocol::lmac</a>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                EV &lt;&lt; <span class="stringliteral">&quot;Sending down data packet\n&quot;</span>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                <a class="code" href="classinet_1_1_mac_protocol_base.html#abcd8fe1c33a039ec5e86fd1337cccc0f">sendDown</a>(data);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                <a class="code" href="classinet_1_1_mac_protocol_base.html#af515de3b0818bdd09f430d46cdb00c5b">deleteCurrentTxFrame</a>();</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a0e816e73b90c713cebf169bb56de39e5">SEND_DATA</a>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: SEND_CONTROL, New state: SEND_DATA&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a1464fec03fb5e043147e1bd592549969">LMAC_SETUP_PHASE_END</a>) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Setup phase end. Start normal work at the next slot.\n&quot;</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                rescheduleAfter(<a class="code" href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">slotDuration</a>, <a class="code" href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">wakeup</a>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">SETUP_PHASE</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                EV &lt;&lt; <span class="stringliteral">&quot;Unknown packet&quot;</span> &lt;&lt; msg-&gt;getKind() &lt;&lt; <span class="stringliteral">&quot;in state&quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a0e816e73b90c713cebf169bb56de39e5">SEND_DATA</a>:</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a790c59626ffb23669124a917458715de">LMAC_WAKEUP</a>) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;I am still sending a message, while a new slot is starting!\n&quot;</span>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                EV &lt;&lt; <span class="stringliteral">&quot;Unknown packet&quot;</span> &lt;&lt; msg-&gt;getKind() &lt;&lt; <span class="stringliteral">&quot;in state&quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38afa6102c2bdab3d3103012eace108d9ed">WAIT_DATA</a>:</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98af1f1fed5e183753ba8a2d42fba67dcf9">LMAC_DATA</a>) {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                <span class="keyword">auto</span> packet = check_and_cast&lt;Packet *&gt;(msg);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                <span class="keyword">const</span> MacAddress&amp; dest = packet-&gt;peekAtFront&lt;LMacDataFrameHeader&gt;()-&gt;getDestAddr();</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot; I have received a data packet.\n&quot;</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                <span class="keywordflow">if</span> (dest == address || dest.isBroadcast()) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;sending pkt to upper...\n&quot;</span>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                    <a class="code" href="classinet_1_1_l_mac.html#a7e2100f5496ff39cce8873e1e981340f">decapsulate</a>(packet);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                    <a class="code" href="classinet_1_1_mac_protocol_base.html#a0e58fc4637c4d7b3b1b5052d2b5d514f">sendUp</a>(packet);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                    EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;packet not for me, deleting...\n&quot;</span>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                    PacketDropDetails details;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                    details.setReason(<a class="code" href="namespaceinet.html#a9c0ecf85d82481d6058caaee2e4a41d9a88c381fd51291e1e9ab716cf93d7a3a2">NOT_ADDRESSED_TO_US</a>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                    emit(<a class="code" href="namespaceinet.html#a8b3e6258ad8d45309159a6bb395946f7">packetDroppedSignal</a>, packet, &amp;details);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                    <span class="keyword">delete</span> packet;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                <span class="comment">// in any case, go back to sleep</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7">SLEEP</a>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: WAIT_DATA, New state: SLEEP&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">radio</a>-&gt;setRadioMode(<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0abacfd8d0669b562782d549518d17c36c58">IRadio::RADIO_MODE_SLEEP</a>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>-&gt;isScheduled())</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                    cancelEvent(<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getKind() == <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a790c59626ffb23669124a917458715de">LMAC_WAKEUP</a>) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7">SLEEP</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Unlikely transition. Old state: WAIT_DATA, New state: SLEEP&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                scheduleAfter(SIMTIME_ZERO, <a class="code" href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">wakeup</a>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                EV &lt;&lt; <span class="stringliteral">&quot;Unknown packet&quot;</span> &lt;&lt; msg-&gt;getKind() &lt;&lt; <span class="stringliteral">&quot;in state&quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Unknown mac state: %d&quot;</span>, <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6066e2607f0f650f71b27b0af21a2351"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6066e2607f0f650f71b27b0af21a2351">&#9670;&nbsp;</a></span>handleUpperPacket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::LMac::handleUpperPacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinet_1_1_packet.html">Packet</a> *&#160;</td>
          <td class="paramname"><em>packet</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle messages from upper layer. </p>
<p>Check whether the queue is not full: if yes, print a warning and drop the packet.</p>
<p>Sending of messages is automatic. </p>

<p>Reimplemented from <a class="el" href="classinet_1_1_layered_protocol_base.html#a95909e9465aafdc0e41355608b261d4d">inet::LayeredProtocolBase</a>.</p>
<div class="fragment"><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;{</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Model error: this module should pull packet from upper queue, direct incoming packet not accepted&quot;</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afab3bcb5d9463b4ee3dada423d9a8a89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afab3bcb5d9463b4ee3dada423d9a8a89">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::LMac::initialize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialization of the module and some variables. </p>

<p>Reimplemented from <a class="el" href="classinet_1_1_mac_protocol_base.html#a49e24a6ab8658c73d1439b1ebe7af1b5">inet::MacProtocolBase</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;{</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="classinet_1_1_mac_protocol_base.html#a49e24a6ab8658c73d1439b1ebe7af1b5">MacProtocolBase::initialize</a>(stage);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordflow">if</span> (stage == <a class="code" href="namespaceinet.html#a6be747ab6f195055e109f27f8462e52e">INITSTAGE_LOCAL</a>) {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">slotDuration</a> = par(<span class="stringliteral">&quot;slotDuration&quot;</span>);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a6e842919c523c5b07926d0d58ef3345c">bitrate</a> = par(<span class="stringliteral">&quot;bitrate&quot;</span>);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a31f2110dc7a2fe38de7ef6ab1cc96f20">headerLength</a> = <a class="code" href="namespaceinet_1_1units_1_1values.html#a02f32b4417da580f5e348f2c3cfb40a7">b</a>(par(<span class="stringliteral">&quot;headerLength&quot;</span>));</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        EV &lt;&lt; <span class="stringliteral">&quot;headerLength is: &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a31f2110dc7a2fe38de7ef6ab1cc96f20">headerLength</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#ab9676a8ac2c1672fd72192ce5c7f05a5">ctrlFrameLength</a> = <a class="code" href="namespaceinet_1_1units_1_1values.html#a02f32b4417da580f5e348f2c3cfb40a7">b</a>(par(<span class="stringliteral">&quot;ctrlFrameLength&quot;</span>));</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a> = par(<span class="stringliteral">&quot;numSlots&quot;</span>);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="comment">// the first N slots are reserved for mobile nodes to be able to function normally</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#ac69fe9a1e6950931d169bd1f5746adfe">reservedMobileSlots</a> = par(<span class="stringliteral">&quot;reservedMobileSlots&quot;</span>);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keyword">auto</span> node = <a class="code" href="namespaceinet.html#a066c281a0963fccbbe766aac35a28ad6">getContainingNode</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a50659b070d103e512b0ae66dd04fa419">myId</a> = node-&gt;isVector() ? node-&gt;getIndex() : getId() % <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38ad0dfc539acde109b07bba7202c869ed7">INIT</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a1c4374dec84f49e4bf7d40ad236275b1">slotChange</a> = <span class="keyword">new</span> cOutVector(<span class="stringliteral">&quot;slotChange&quot;</span>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="comment">// how long does it take to send/receive a control packet</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a8e6bee0ad735aa6a73193043367d8e71">controlDuration</a> = (double)(<a class="code" href="namespaceinet_1_1units_1_1values.html#a02f32b4417da580f5e348f2c3cfb40a7">b</a>(<a class="code" href="classinet_1_1_l_mac.html#a31f2110dc7a2fe38de7ef6ab1cc96f20">headerLength</a>).get() + <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a> + 16) / (<span class="keywordtype">double</span>)<a class="code" href="classinet_1_1_l_mac.html#a6e842919c523c5b07926d0d58ef3345c">bitrate</a>; <span class="comment">// FIXME replace 16 to a constant</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        EV &lt;&lt; <span class="stringliteral">&quot;Control packets take : &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a8e6bee0ad735aa6a73193043367d8e71">controlDuration</a> &lt;&lt; <span class="stringliteral">&quot; seconds to transmit\n&quot;</span>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <a class="code" href="classinet_1_1_mac_protocol_base.html#a1f66409a3316782d68ab967eb1cff36a">txQueue</a> = <a class="code" href="classinet_1_1_mac_protocol_base.html#a5318e542573303f9d43d88d5d37d69d6">getQueue</a>(gate(<a class="code" href="classinet_1_1_mac_protocol_base.html#aa15d2ec2832daffdd6982a67bd5407f1">upperLayerInGateId</a>));</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (stage == <a class="code" href="namespaceinet.html#ac59da13caae127564113d1343d890064">INITSTAGE_LINK_LAYER</a>) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">radio</a>.reference(<span class="keyword">this</span>, <span class="stringliteral">&quot;radioModule&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        cModule *radioModule = check_and_cast&lt;cModule *&gt;(<a class="code" href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">radio</a>.get());</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        radioModule-&gt;subscribe(<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a483d8f7eef0ec6e315cecbf8dc1adb8f">IRadio::radioModeChangedSignal</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        radioModule-&gt;subscribe(<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a9fe4e166afbe37ff067844e6dbdc4470">IRadio::transmissionStateChangedSignal</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        WATCH(<a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        EV_DETAIL &lt;&lt; <span class="stringliteral">&quot; slotDuration = &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">slotDuration</a></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; controlDuration = &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a8e6bee0ad735aa6a73193043367d8e71">controlDuration</a></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; numSlots = &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">numSlots</a></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; bitrate = &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a6e842919c523c5b07926d0d58ef3345c">bitrate</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;timeout&quot;</span>, <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98ab1fb07569ea80bfc11d1d4d3c200b840">LMAC_TIMEOUT</a>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#af44b69395285bbb7b9df2546e9ea4345">sendData</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;sendData&quot;</span>, <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a6a1543ac9a41ac7ed5f523f46e2cc41f">LMAC_SEND_DATA</a>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">wakeup</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;wakeup&quot;</span>, <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a790c59626ffb23669124a917458715de">LMAC_WAKEUP</a>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#aec4d39b176fb0c4ec55af82ff08d475e">initChecker</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;setup phase&quot;</span>, <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a1464fec03fb5e043147e1bd592549969">LMAC_SETUP_PHASE_END</a>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a90a8d86e6c3e900c2782dc25a79f0d17">checkChannel</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;checkchannel&quot;</span>, <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98ab551445f1b1455a3f956bac71d22043a">LMAC_CHECK_CHANNEL</a>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a066a6998a29eb65099f158d1c77ef35a">start_lmac</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;start_lmac&quot;</span>, <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a9f269aba0684f024446694981ead5058">LMAC_START_LMAC</a>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a683b18b11632f14f79b40e00373665a9">send_control</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;send_control&quot;</span>, <a class="code" href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a8e85100ddbd09040f6a026688bcbb19c">LMAC_SEND_CONTROL</a>);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        scheduleAfter(SIMTIME_ZERO, <a class="code" href="classinet_1_1_l_mac.html#a066a6998a29eb65099f158d1c77ef35a">start_lmac</a>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;My Mac address is&quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_mac_protocol_base.html#a1bdd471f869ccf0ea716e8bce60bdada">networkInterface</a>-&gt;getMacAddress() &lt;&lt; <span class="stringliteral">&quot; and my Id is &quot;</span> &lt;&lt; <a class="code" href="classinet_1_1_l_mac.html#a50659b070d103e512b0ae66dd04fa419">myId</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b3f60ba697cfa33cb3dac8713a7ca8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b3f60ba697cfa33cb3dac8713a7ca8e">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinet_1_1_l_mac.html">LMac</a>&amp; inet::LMac::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classinet_1_1_l_mac.html">LMac</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assignment operator is not allowed. </p>

</div>
</div>
<a id="a9f763e271e16381eeb61a5fd0f35a42e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f763e271e16381eeb61a5fd0f35a42e">&#9670;&nbsp;</a></span>receiveSignal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void inet::LMac::receiveSignal </td>
          <td>(</td>
          <td class="paramtype">cComponent *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simsignal_t&#160;</td>
          <td class="paramname"><em>signalID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">intval_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cObject *&#160;</td>
          <td class="paramname"><em>details</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle control messages from lower layer. </p>
<p>Handle transmission over messages: send the data packet or don;t do anyhting. </p>
<div class="fragment"><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;{</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <a class="code" href="_self_doc_8h.html#a8e54030c665b5254da268db865fccdfc">Enter_Method</a>(<span class="stringliteral">&quot;%s&quot;</span>, cComponent::getSignalName(signalID));</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">if</span> (signalID == <a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a9fe4e166afbe37ff067844e6dbdc4470">IRadio::transmissionStateChangedSignal</a>) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#ac7d3c2a56d709c5d038dc7dff4d97159">IRadio::TransmissionState</a> newRadioTransmissionState = <span class="keyword">static_cast&lt;</span><a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#ac7d3c2a56d709c5d038dc7dff4d97159">IRadio::TransmissionState</a><span class="keyword">&gt;</span>(value);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a9384a418719092ce561351e5cfa05fdd">transmissionState</a> == <a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#ac7d3c2a56d709c5d038dc7dff4d97159a1942a9a25e1adba477444ff8dcf89c1d">IRadio::TRANSMISSION_STATE_TRANSMITTING</a> &amp;&amp; newRadioTransmissionState == <a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#ac7d3c2a56d709c5d038dc7dff4d97159a6fcc91f18e6e2bb73ea00fbd734bb35a">IRadio::TRANSMISSION_STATE_IDLE</a>) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="comment">// if data is scheduled for transfer, don;t do anything.</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#af44b69395285bbb7b9df2546e9ea4345">sendData</a>-&gt;isScheduled()) {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot; transmission of control packet over. data transfer will start soon.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot; transmission over. nothing else is scheduled, get back to sleep.&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> = <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7">SLEEP</a>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                EV_DETAIL &lt;&lt; <span class="stringliteral">&quot;Old state: ?, New state: SLEEP&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                <a class="code" href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">radio</a>-&gt;setRadioMode(<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0abacfd8d0669b562782d549518d17c36c58">IRadio::RADIO_MODE_SLEEP</a>);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>-&gt;isScheduled())</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                    cancelEvent(<a class="code" href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">timeout</a>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <a class="code" href="classinet_1_1_l_mac.html#a9384a418719092ce561351e5cfa05fdd">transmissionState</a> = newRadioTransmissionState;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (signalID == <a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a483d8f7eef0ec6e315cecbf8dc1adb8f">IRadio::radioModeChangedSignal</a>) {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0ab">IRadio::RadioMode</a> radioMode = (<a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0ab">IRadio::RadioMode</a>)value;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">macState</a> == <a class="code" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38aef3442d2c210194c37f03cad691df2c2">SEND_CONTROL</a> &amp;&amp; radioMode == <a class="code" href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0aba6ed69d32c284dd85069be7f141f24e2f">IRadio::RADIO_MODE_TRANSMITTER</a>) {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <span class="comment">// we just switched to TX after CCA, so simply send the first sendPremable self message</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            scheduleAfter(SIMTIME_ZERO, <a class="code" href="classinet_1_1_l_mac.html#a683b18b11632f14f79b40e00373665a9">send_control</a>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    }</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6e842919c523c5b07926d0d58ef3345c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e842919c523c5b07926d0d58ef3345c">&#9670;&nbsp;</a></span>bitrate</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double inet::LMac::bitrate</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the bit rate at which we transmit </p>

</div>
</div>
<a id="a90a8d86e6c3e900c2782dc25a79f0d17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90a8d86e6c3e900c2782dc25a79f0d17">&#9670;&nbsp;</a></span>checkChannel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* inet::LMac::checkChannel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8e6bee0ad735aa6a73193043367d8e71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e6bee0ad735aa6a73193043367d8e71">&#9670;&nbsp;</a></span>controlDuration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double inet::LMac::controlDuration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Duration of teh control time in each slot. </p>

</div>
</div>
<a id="ab9676a8ac2c1672fd72192ce5c7f05a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9676a8ac2c1672fd72192ce5c7f05a5">&#9670;&nbsp;</a></span>ctrlFrameLength</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceinet_1_1units_1_1values.html#a02f32b4417da580f5e348f2c3cfb40a7">b</a> inet::LMac::ctrlFrameLength</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Length of the control frames. </p>

</div>
</div>
<a id="ac5410823cbad246023b701beba853785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5410823cbad246023b701beba853785">&#9670;&nbsp;</a></span>currSlot</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int inet::LMac::currSlot</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current slot of the simulation. </p>

</div>
</div>
<a id="a31f2110dc7a2fe38de7ef6ab1cc96f20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31f2110dc7a2fe38de7ef6ab1cc96f20">&#9670;&nbsp;</a></span>headerLength</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceinet_1_1units_1_1values.html#a02f32b4417da580f5e348f2c3cfb40a7">b</a> inet::LMac::headerLength</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Length of the header. </p>

</div>
</div>
<a id="aec4d39b176fb0c4ec55af82ff08d475e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec4d39b176fb0c4ec55af82ff08d475e">&#9670;&nbsp;</a></span>initChecker</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* inet::LMac::initChecker</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa43e98b70518667832a3b7c57389b088"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa43e98b70518667832a3b7c57389b088">&#9670;&nbsp;</a></span>LMAC_FREE_SLOT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classinet_1_1_mac_address.html">MacAddress</a> inet::LMac::LMAC_FREE_SLOT</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a91af0eaae371a9fe08383163970f4b61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91af0eaae371a9fe08383163970f4b61">&#9670;&nbsp;</a></span>LMAC_NO_RECEIVER</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classinet_1_1_mac_address.html">MacAddress</a> inet::LMac::LMAC_NO_RECEIVER</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>dummy receiver address to indicate no pending packets in the control packet </p>

</div>
</div>
<a id="a6572cdb86cfc752b4ea802c0aea4affe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6572cdb86cfc752b4ea802c0aea4affe">&#9670;&nbsp;</a></span>macState</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38">States</a> inet::LMac::macState</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>keep track of MAC state </p>

</div>
</div>
<a id="a50659b070d103e512b0ae66dd04fa419"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50659b070d103e512b0ae66dd04fa419">&#9670;&nbsp;</a></span>myId</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int inet::LMac::myId</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>my ID </p>

</div>
</div>
<a id="a0b8a9ce1d762d556b6364790604fc68b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b8a9ce1d762d556b6364790604fc68b">&#9670;&nbsp;</a></span>mySlot</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int inet::LMac::mySlot</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>my slot ID </p>

</div>
</div>
<a id="a0c9573c25255ff2c2263d661c9ad4e0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c9573c25255ff2c2263d661c9ad4e0a">&#9670;&nbsp;</a></span>numSlots</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int inet::LMac::numSlots</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>how many slots are there </p>

</div>
</div>
<a id="a30567d78dea171b6be431f62711d30ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30567d78dea171b6be431f62711d30ab">&#9670;&nbsp;</a></span>occSlotsAway</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinet_1_1_mac_address.html">MacAddress</a> inet::LMac::occSlotsAway[64]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Occupied slots of two-hop neighbors. </p>

</div>
</div>
<a id="afd5fd2ef6ddb92f412fd0165372d4f4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd5fd2ef6ddb92f412fd0165372d4f4b">&#9670;&nbsp;</a></span>occSlotsDirect</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinet_1_1_mac_address.html">MacAddress</a> inet::LMac::occSlotsDirect[64]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Occupied slots from nodes, from which I hear directly. </p>

</div>
</div>
<a id="a3e43e832587384ec3bdc1057c6554626"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e43e832587384ec3bdc1057c6554626">&#9670;&nbsp;</a></span>radio</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinet_1_1_module_ref_by_par.html">ModuleRefByPar</a>&lt;<a class="el" href="classinet_1_1physicallayer_1_1_i_radio.html">physicallayer::IRadio</a>&gt; inet::LMac::radio</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The radio. </p>

</div>
</div>
<a id="ac69fe9a1e6950931d169bd1f5746adfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac69fe9a1e6950931d169bd1f5746adfe">&#9670;&nbsp;</a></span>reservedMobileSlots</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int inet::LMac::reservedMobileSlots</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The first couple of slots are reserved for nodes with special needs to avoid changing slots for them (mobile nodes) </p>

</div>
</div>
<a id="a683b18b11632f14f79b40e00373665a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a683b18b11632f14f79b40e00373665a9">&#9670;&nbsp;</a></span>send_control</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* inet::LMac::send_control</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af44b69395285bbb7b9df2546e9ea4345"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af44b69395285bbb7b9df2546e9ea4345">&#9670;&nbsp;</a></span>sendData</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* inet::LMac::sendData</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="acb057c3f2e76c09661ecf20530bea5e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb057c3f2e76c09661ecf20530bea5e8">&#9670;&nbsp;</a></span>SETUP_PHASE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool inet::LMac::SETUP_PHASE</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the setup phase is the beginning of the simulation, where only control packets at very small slot durations are exchanged. </p>

</div>
</div>
<a id="a1c4374dec84f49e4bf7d40ad236275b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c4374dec84f49e4bf7d40ad236275b1">&#9670;&nbsp;</a></span>slotChange</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector* inet::LMac::slotChange</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>indicate how often the node needs to change its slot because of collisions </p>

</div>
</div>
<a id="a35c9e4032ae5c7d63af2f2df90d5d6fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35c9e4032ae5c7d63af2f2df90d5d6fa">&#9670;&nbsp;</a></span>slotDuration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double inet::LMac::slotDuration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Duration of a slot. </p>

</div>
</div>
<a id="a066a6998a29eb65099f158d1c77ef35a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a066a6998a29eb65099f158d1c77ef35a">&#9670;&nbsp;</a></span>start_lmac</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* inet::LMac::start_lmac</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a840a9d6f5dd43360783976eb141427ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840a9d6f5dd43360783976eb141427ac">&#9670;&nbsp;</a></span>timeout</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* inet::LMac::timeout</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9384a418719092ce561351e5cfa05fdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9384a418719092ce561351e5cfa05fdd">&#9670;&nbsp;</a></span>transmissionState</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinet_1_1physicallayer_1_1_i_radio.html#ac7d3c2a56d709c5d038dc7dff4d97159">physicallayer::IRadio::TransmissionState</a> inet::LMac::transmissionState</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a93207d3fa68c5be1050098d3951fa901"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93207d3fa68c5be1050098d3951fa901">&#9670;&nbsp;</a></span>wakeup</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* inet::LMac::wakeup</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_l_mac_8h.html">LMac.h</a></li>
<li><a class="el" href="_l_mac_8cc.html">LMac.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclassinet_1_1_mac_protocol_base_html_a1bdd471f869ccf0ea716e8bce60bdada"><div class="ttname"><a href="classinet_1_1_mac_protocol_base.html#a1bdd471f869ccf0ea716e8bce60bdada">inet::MacProtocolBase::networkInterface</a></div><div class="ttdeci">opp_component_ptr&lt; NetworkInterface &gt; networkInterface</div><div class="ttdef"><b>Definition:</b> MacProtocolBase.h:30</div></div>
<div class="ttc" id="aclassinet_1_1_packet_html_a325240f10eb5a064224f8eaf2d7b5dc9"><div class="ttname"><a href="classinet_1_1_packet.html#a325240f10eb5a064224f8eaf2d7b5dc9">inet::Packet::removeAtFront</a></div><div class="ttdeci">const Ptr&lt; Chunk &gt; removeAtFront(b length=b(-1), int flags=0)</div><div class="ttdoc">Removes the designated part from the beginning of the data part of the packet and returns it as a mut...</div><div class="ttdef"><b>Definition:</b> Packet.h:653</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a30567d78dea171b6be431f62711d30ab"><div class="ttname"><a href="classinet_1_1_l_mac.html#a30567d78dea171b6be431f62711d30ab">inet::LMac::occSlotsAway</a></div><div class="ttdeci">MacAddress occSlotsAway[64]</div><div class="ttdoc">Occupied slots of two-hop neighbors.</div><div class="ttdef"><b>Definition:</b> LMac.h:178</div></div>
<div class="ttc" id="anamespaceinet_html_a1f225ebf1ee6f6e7b4cc3e0d71a69f98ab1fb07569ea80bfc11d1d4d3c200b840"><div class="ttname"><a href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98ab1fb07569ea80bfc11d1d4d3c200b840">inet::LMAC_TIMEOUT</a></div><div class="ttdeci">@ LMAC_TIMEOUT</div><div class="ttdef"><b>Definition:</b> LMacHeader_m.h:69</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7"><div class="ttname"><a href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a08ce5a317dbf04fe1c5d16b315f3e2a7">inet::LMac::SLEEP</a></div><div class="ttdeci">@ SLEEP</div><div class="ttdef"><b>Definition:</b> LMac.h:143</div></div>
<div class="ttc" id="aclassinet_1_1_mac_protocol_base_html_a0e58fc4637c4d7b3b1b5052d2b5d514f"><div class="ttname"><a href="classinet_1_1_mac_protocol_base.html#a0e58fc4637c4d7b3b1b5052d2b5d514f">inet::MacProtocolBase::sendUp</a></div><div class="ttdeci">virtual void sendUp(cMessage *message)</div><div class="ttdef"><b>Definition:</b> MacProtocolBase.cc:59</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a90a8d86e6c3e900c2782dc25a79f0d17"><div class="ttname"><a href="classinet_1_1_l_mac.html#a90a8d86e6c3e900c2782dc25a79f0d17">inet::LMac::checkChannel</a></div><div class="ttdeci">cMessage * checkChannel</div><div class="ttdef"><b>Definition:</b> LMac.h:190</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_ab261282b797df23143e81ba5ef478b38a01011b1d79aa44f7751103e86a6e4454"><div class="ttname"><a href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a01011b1d79aa44f7751103e86a6e4454">inet::LMac::WAIT_CONTROL</a></div><div class="ttdeci">@ WAIT_CONTROL</div><div class="ttdef"><b>Definition:</b> LMac.h:143</div></div>
<div class="ttc" id="anamespaceinet_html_a1f225ebf1ee6f6e7b4cc3e0d71a69f98a790c59626ffb23669124a917458715de"><div class="ttname"><a href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a790c59626ffb23669124a917458715de">inet::LMAC_WAKEUP</a></div><div class="ttdeci">@ LMAC_WAKEUP</div><div class="ttdef"><b>Definition:</b> LMacHeader_m.h:70</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_af44b69395285bbb7b9df2546e9ea4345"><div class="ttname"><a href="classinet_1_1_l_mac.html#af44b69395285bbb7b9df2546e9ea4345">inet::LMac::sendData</a></div><div class="ttdeci">cMessage * sendData</div><div class="ttdef"><b>Definition:</b> LMac.h:188</div></div>
<div class="ttc" id="anamespaceinet_html_a1f225ebf1ee6f6e7b4cc3e0d71a69f98ad0d4e21c6224ebcca3649e2dfa6a00e1"><div class="ttname"><a href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98ad0d4e21c6224ebcca3649e2dfa6a00e1">inet::LMAC_CONTROL</a></div><div class="ttdeci">@ LMAC_CONTROL</div><div class="ttdef"><b>Definition:</b> LMacHeader_m.h:68</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_ab261282b797df23143e81ba5ef478b38ad0dfc539acde109b07bba7202c869ed7"><div class="ttname"><a href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38ad0dfc539acde109b07bba7202c869ed7">inet::LMac::INIT</a></div><div class="ttdeci">@ INIT</div><div class="ttdef"><b>Definition:</b> LMac.h:143</div></div>
<div class="ttc" id="anamespaceinet_html_a9c0ecf85d82481d6058caaee2e4a41d9a0c2387c9889a3ea0e5202c25d5027a2a"><div class="ttname"><a href="namespaceinet.html#a9c0ecf85d82481d6058caaee2e4a41d9a0c2387c9889a3ea0e5202c25d5027a2a">inet::INCORRECTLY_RECEIVED</a></div><div class="ttdeci">@ INCORRECTLY_RECEIVED</div><div class="ttdef"><b>Definition:</b> Simsignals_m.h:71</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a6e842919c523c5b07926d0d58ef3345c"><div class="ttname"><a href="classinet_1_1_l_mac.html#a6e842919c523c5b07926d0d58ef3345c">inet::LMac::bitrate</a></div><div class="ttdeci">double bitrate</div><div class="ttdoc">the bit rate at which we transmit</div><div class="ttdef"><b>Definition:</b> LMac.h:195</div></div>
<div class="ttc" id="aclassinet_1_1_packet_html_a6ac6d5abaa6d6d3f308874da9466dcb8"><div class="ttname"><a href="classinet_1_1_packet.html#a6ac6d5abaa6d6d3f308874da9466dcb8">inet::Packet::peekAtFront</a></div><div class="ttdeci">const Ptr&lt; const Chunk &gt; peekAtFront(b length=b(-1), int flags=0) const</div><div class="ttdoc">Returns the designated part from the beginning of the data part of the packet as an immutable chunk i...</div><div class="ttdef"><b>Definition:</b> Packet.h:245</div></div>
<div class="ttc" id="anamespaceinet_html_a066c281a0963fccbbe766aac35a28ad6"><div class="ttname"><a href="namespaceinet.html#a066c281a0963fccbbe766aac35a28ad6">inet::getContainingNode</a></div><div class="ttdeci">cModule * getContainingNode(const cModule *from)</div><div class="ttdoc">Find the node containing the given module.</div><div class="ttdef"><b>Definition:</b> ModuleAccess.cc:40</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_ab9676a8ac2c1672fd72192ce5c7f05a5"><div class="ttname"><a href="classinet_1_1_l_mac.html#ab9676a8ac2c1672fd72192ce5c7f05a5">inet::LMac::ctrlFrameLength</a></div><div class="ttdeci">b ctrlFrameLength</div><div class="ttdoc">Length of the control frames.</div><div class="ttdef"><b>Definition:</b> LMac.h:164</div></div>
<div class="ttc" id="aclassinet_1_1physicallayer_1_1_i_radio_html_a8e9f8ba27cb8f145f4c80b0c2ef2d0abacfd8d0669b562782d549518d17c36c58"><div class="ttname"><a href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0abacfd8d0669b562782d549518d17c36c58">inet::physicallayer::IRadio::RADIO_MODE_SLEEP</a></div><div class="ttdeci">@ RADIO_MODE_SLEEP</div><div class="ttdoc">The radio is sleeping, frame reception or transmission is not possible, power consumption is minimal,...</div><div class="ttdef"><b>Definition:</b> IRadio.h:90</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a91af0eaae371a9fe08383163970f4b61"><div class="ttname"><a href="classinet_1_1_l_mac.html#a91af0eaae371a9fe08383163970f4b61">inet::LMac::LMAC_NO_RECEIVER</a></div><div class="ttdeci">static const MacAddress LMAC_NO_RECEIVER</div><div class="ttdoc">dummy receiver address to indicate no pending packets in the control packet</div><div class="ttdef"><b>Definition:</b> LMac.h:147</div></div>
<div class="ttc" id="a_i_udp-gates_8txt_html_a0323ac93ca7b779d82d9fb23cd4c8681"><div class="ttname"><a href="_i_udp-gates_8txt.html#a0323ac93ca7b779d82d9fb23cd4c8681">DispatchProtocolReq</a></div><div class="ttdeci">removed DscpReq Ipv4ControlInfo Ipv6ControlInfo up L3AddressInd DispatchProtocolReq L4PortInd Ipv4ControlInfo Ipv6ControlInfo down DispatchProtocolReq</div><div class="ttdef"><b>Definition:</b> IUdp-gates.txt:25</div></div>
<div class="ttc" id="aclassinet_1_1_protocol_html_a3cfc5e14a69c20bfaca0bb456cb72228"><div class="ttname"><a href="classinet_1_1_protocol.html#a3cfc5e14a69c20bfaca0bb456cb72228">inet::Protocol::lmac</a></div><div class="ttdeci">static const Protocol lmac</div><div class="ttdef"><b>Definition:</b> Protocol.h:98</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a31f2110dc7a2fe38de7ef6ab1cc96f20"><div class="ttname"><a href="classinet_1_1_l_mac.html#a31f2110dc7a2fe38de7ef6ab1cc96f20">inet::LMac::headerLength</a></div><div class="ttdeci">b headerLength</div><div class="ttdoc">Length of the header.</div><div class="ttdef"><b>Definition:</b> LMac.h:162</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a1c4374dec84f49e4bf7d40ad236275b1"><div class="ttname"><a href="classinet_1_1_l_mac.html#a1c4374dec84f49e4bf7d40ad236275b1">inet::LMac::slotChange</a></div><div class="ttdeci">cOutVector * slotChange</div><div class="ttdoc">indicate how often the node needs to change its slot because of collisions</div><div class="ttdef"><b>Definition:</b> LMac.h:154</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a7e2100f5496ff39cce8873e1e981340f"><div class="ttname"><a href="classinet_1_1_l_mac.html#a7e2100f5496ff39cce8873e1e981340f">inet::LMac::decapsulate</a></div><div class="ttdeci">virtual void decapsulate(Packet *)</div><div class="ttdef"><b>Definition:</b> LMac.cc:602</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a6572cdb86cfc752b4ea802c0aea4affe"><div class="ttname"><a href="classinet_1_1_l_mac.html#a6572cdb86cfc752b4ea802c0aea4affe">inet::LMac::macState</a></div><div class="ttdeci">States macState</div><div class="ttdoc">keep track of MAC state</div><div class="ttdef"><b>Definition:</b> LMac.h:157</div></div>
<div class="ttc" id="aclassinet_1_1physicallayer_1_1_i_radio_html_a9fe4e166afbe37ff067844e6dbdc4470"><div class="ttname"><a href="classinet_1_1physicallayer_1_1_i_radio.html#a9fe4e166afbe37ff067844e6dbdc4470">inet::physicallayer::IRadio::transmissionStateChangedSignal</a></div><div class="ttdeci">static simsignal_t transmissionStateChangedSignal</div><div class="ttdoc">This signal is emitted when the radio transmission state of the radio is changed.</div><div class="ttdef"><b>Definition:</b> IRadio.h:60</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a35c9e4032ae5c7d63af2f2df90d5d6fa"><div class="ttname"><a href="classinet_1_1_l_mac.html#a35c9e4032ae5c7d63af2f2df90d5d6fa">inet::LMac::slotDuration</a></div><div class="ttdeci">double slotDuration</div><div class="ttdoc">Duration of a slot.</div><div class="ttdef"><b>Definition:</b> LMac.h:160</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a840a9d6f5dd43360783976eb141427ac"><div class="ttname"><a href="classinet_1_1_l_mac.html#a840a9d6f5dd43360783976eb141427ac">inet::LMac::timeout</a></div><div class="ttdeci">cMessage * timeout</div><div class="ttdef"><b>Definition:</b> LMac.h:187</div></div>
<div class="ttc" id="aclassinet_1_1physicallayer_1_1_i_radio_html_a8e9f8ba27cb8f145f4c80b0c2ef2d0aba6ed69d32c284dd85069be7f141f24e2f"><div class="ttname"><a href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0aba6ed69d32c284dd85069be7f141f24e2f">inet::physicallayer::IRadio::RADIO_MODE_TRANSMITTER</a></div><div class="ttdeci">@ RADIO_MODE_TRANSMITTER</div><div class="ttdoc">The radio is prepared for frame transmission, frame reception is not possible, power consumption is l...</div><div class="ttdef"><b>Definition:</b> IRadio.h:104</div></div>
<div class="ttc" id="anamespaceinet_html_a8b3e6258ad8d45309159a6bb395946f7"><div class="ttname"><a href="namespaceinet.html#a8b3e6258ad8d45309159a6bb395946f7">inet::packetDroppedSignal</a></div><div class="ttdeci">simsignal_t packetDroppedSignal</div><div class="ttdef"><b>Definition:</b> Simsignals.cc:85</div></div>
<div class="ttc" id="a_i_udp-gates_8txt_html_afd36d0627e26925acd433b1dd1fdd2bc"><div class="ttname"><a href="_i_udp-gates_8txt.html#afd36d0627e26925acd433b1dd1fdd2bc">PacketProtocolTag</a></div><div class="ttdeci">removed DscpReq Ipv4ControlInfo Ipv6ControlInfo up L3AddressInd DispatchProtocolReq L4PortInd Ipv4ControlInfo Ipv6ControlInfo down PacketProtocolTag</div><div class="ttdef"><b>Definition:</b> IUdp-gates.txt:25</div></div>
<div class="ttc" id="aclassinet_1_1_mac_protocol_base_html_a9b65875967a869921cd0ba8d99671c95"><div class="ttname"><a href="classinet_1_1_mac_protocol_base.html#a9b65875967a869921cd0ba8d99671c95">inet::MacProtocolBase::MacProtocolBase</a></div><div class="ttdeci">MacProtocolBase()</div><div class="ttdef"><b>Definition:</b> MacProtocolBase.cc:15</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_ab261282b797df23143e81ba5ef478b38afa6102c2bdab3d3103012eace108d9ed"><div class="ttname"><a href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38afa6102c2bdab3d3103012eace108d9ed">inet::LMac::WAIT_DATA</a></div><div class="ttdeci">@ WAIT_DATA</div><div class="ttdef"><b>Definition:</b> LMac.h:143</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_ab261282b797df23143e81ba5ef478b38aef3442d2c210194c37f03cad691df2c2"><div class="ttname"><a href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38aef3442d2c210194c37f03cad691df2c2">inet::LMac::SEND_CONTROL</a></div><div class="ttdeci">@ SEND_CONTROL</div><div class="ttdef"><b>Definition:</b> LMac.h:143</div></div>
<div class="ttc" id="anamespaceinet_html_a1f225ebf1ee6f6e7b4cc3e0d71a69f98a8e85100ddbd09040f6a026688bcbb19c"><div class="ttname"><a href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a8e85100ddbd09040f6a026688bcbb19c">inet::LMAC_SEND_CONTROL</a></div><div class="ttdeci">@ LMAC_SEND_CONTROL</div><div class="ttdef"><b>Definition:</b> LMacHeader_m.h:77</div></div>
<div class="ttc" id="anamespaceinet_1_1units_1_1values_html_a108df471d310062a178144ec45653798"><div class="ttname"><a href="namespaceinet_1_1units_1_1values.html#a108df471d310062a178144ec45653798">inet::units::values::s</a></div><div class="ttdeci">value&lt; double, units::s &gt; s</div><div class="ttdef"><b>Definition:</b> Units.h:1235</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_aec4d39b176fb0c4ec55af82ff08d475e"><div class="ttname"><a href="classinet_1_1_l_mac.html#aec4d39b176fb0c4ec55af82ff08d475e">inet::LMac::initChecker</a></div><div class="ttdeci">cMessage * initChecker</div><div class="ttdef"><b>Definition:</b> LMac.h:189</div></div>
<div class="ttc" id="aclassinet_1_1physicallayer_1_1_i_radio_html_a8e9f8ba27cb8f145f4c80b0c2ef2d0abaf50d0dfad7c8aba08b05d4afbab7adb1"><div class="ttname"><a href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0abaf50d0dfad7c8aba08b05d4afbab7adb1">inet::physicallayer::IRadio::RADIO_MODE_RECEIVER</a></div><div class="ttdeci">@ RADIO_MODE_RECEIVER</div><div class="ttdoc">The radio is prepared for frame reception, frame transmission is not possible, power consumption is l...</div><div class="ttdef"><b>Definition:</b> IRadio.h:97</div></div>
<div class="ttc" id="aclassinet_1_1_find_module_html_ac97ae5e6278e8496ca517754649a0b97"><div class="ttname"><a href="classinet_1_1_find_module.html#ac97ae5e6278e8496ca517754649a0b97">inet::FindModule::findHost</a></div><div class="ttdeci">static cModule * findHost(cModule *m)</div><div class="ttdoc">Returns a pointer to the host module of the passed module.</div><div class="ttdef"><b>Definition:</b> FindModule.h:57</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_ac5410823cbad246023b701beba853785"><div class="ttname"><a href="classinet_1_1_l_mac.html#ac5410823cbad246023b701beba853785">inet::LMac::currSlot</a></div><div class="ttdeci">int currSlot</div><div class="ttdoc">The current slot of the simulation.</div><div class="ttdef"><b>Definition:</b> LMac.h:174</div></div>
<div class="ttc" id="aclassinet_1_1_mac_protocol_base_html_a5a05ba95252550f1e27df46ea4052736"><div class="ttname"><a href="classinet_1_1_mac_protocol_base.html#a5a05ba95252550f1e27df46ea4052736">inet::MacProtocolBase::currentTxFrame</a></div><div class="ttdeci">Packet * currentTxFrame</div><div class="ttdoc">Currently transmitted frame if any.</div><div class="ttdef"><b>Definition:</b> MacProtocolBase.h:35</div></div>
<div class="ttc" id="anamespaceinet_html_a1f225ebf1ee6f6e7b4cc3e0d71a69f98a9f269aba0684f024446694981ead5058"><div class="ttname"><a href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a9f269aba0684f024446694981ead5058">inet::LMAC_START_LMAC</a></div><div class="ttdeci">@ LMAC_START_LMAC</div><div class="ttdef"><b>Definition:</b> LMacHeader_m.h:76</div></div>
<div class="ttc" id="aclassinet_1_1_mac_protocol_base_html_abcd8fe1c33a039ec5e86fd1337cccc0f"><div class="ttname"><a href="classinet_1_1_mac_protocol_base.html#abcd8fe1c33a039ec5e86fd1337cccc0f">inet::MacProtocolBase::sendDown</a></div><div class="ttdeci">virtual void sendDown(cMessage *message)</div><div class="ttdef"><b>Definition:</b> MacProtocolBase.cc:66</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a3e43e832587384ec3bdc1057c6554626"><div class="ttname"><a href="classinet_1_1_l_mac.html#a3e43e832587384ec3bdc1057c6554626">inet::LMac::radio</a></div><div class="ttdeci">ModuleRefByPar&lt; physicallayer::IRadio &gt; radio</div><div class="ttdoc">The radio.</div><div class="ttdef"><b>Definition:</b> LMac.h:183</div></div>
<div class="ttc" id="aclassinet_1_1_mac_protocol_base_html_aa15d2ec2832daffdd6982a67bd5407f1"><div class="ttname"><a href="classinet_1_1_mac_protocol_base.html#aa15d2ec2832daffdd6982a67bd5407f1">inet::MacProtocolBase::upperLayerInGateId</a></div><div class="ttdeci">int upperLayerInGateId</div><div class="ttdoc">Gate ids.</div><div class="ttdef"><b>Definition:</b> MacProtocolBase.h:24</div></div>
<div class="ttc" id="anamespaceinet_html_a6be747ab6f195055e109f27f8462e52e"><div class="ttname"><a href="namespaceinet.html#a6be747ab6f195055e109f27f8462e52e">inet::INITSTAGE_LOCAL</a></div><div class="ttdeci">INET_API InitStage INITSTAGE_LOCAL</div><div class="ttdoc">Initialization of local state that don't use or affect other modules includes:</div></div>
<div class="ttc" id="aclassinet_1_1physicallayer_1_1_i_radio_html_ac7d3c2a56d709c5d038dc7dff4d97159a1942a9a25e1adba477444ff8dcf89c1d"><div class="ttname"><a href="classinet_1_1physicallayer_1_1_i_radio.html#ac7d3c2a56d709c5d038dc7dff4d97159a1942a9a25e1adba477444ff8dcf89c1d">inet::physicallayer::IRadio::TRANSMISSION_STATE_TRANSMITTING</a></div><div class="ttdeci">@ TRANSMISSION_STATE_TRANSMITTING</div><div class="ttdoc">The radio medium is busy, the radio is currently transmitting a signal.</div><div class="ttdef"><b>Definition:</b> IRadio.h:171</div></div>
<div class="ttc" id="anamespaceinet_html_a1f225ebf1ee6f6e7b4cc3e0d71a69f98a1464fec03fb5e043147e1bd592549969"><div class="ttname"><a href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a1464fec03fb5e043147e1bd592549969">inet::LMAC_SETUP_PHASE_END</a></div><div class="ttdeci">@ LMAC_SETUP_PHASE_END</div><div class="ttdef"><b>Definition:</b> LMacHeader_m.h:72</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_acb057c3f2e76c09661ecf20530bea5e8"><div class="ttname"><a href="classinet_1_1_l_mac.html#acb057c3f2e76c09661ecf20530bea5e8">inet::LMac::SETUP_PHASE</a></div><div class="ttdeci">bool SETUP_PHASE</div><div class="ttdoc">the setup phase is the beginning of the simulation, where only control packets at very small slot dur...</div><div class="ttdef"><b>Definition:</b> LMac.h:151</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_ab261282b797df23143e81ba5ef478b38a0e816e73b90c713cebf169bb56de39e5"><div class="ttname"><a href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a0e816e73b90c713cebf169bb56de39e5">inet::LMac::SEND_DATA</a></div><div class="ttdeci">@ SEND_DATA</div><div class="ttdef"><b>Definition:</b> LMac.h:143</div></div>
<div class="ttc" id="anamespaceinet_1_1units_1_1values_html_a02f32b4417da580f5e348f2c3cfb40a7"><div class="ttname"><a href="namespaceinet_1_1units_1_1values.html#a02f32b4417da580f5e348f2c3cfb40a7">inet::units::values::b</a></div><div class="ttdeci">value&lt; int64_t, units::b &gt; b</div><div class="ttdef"><b>Definition:</b> Units.h:1241</div></div>
<div class="ttc" id="aclassinet_1_1_packet_html_abc89c28a84783010fbd6f16924cb244c"><div class="ttname"><a href="classinet_1_1_packet.html#abc89c28a84783010fbd6f16924cb244c">inet::Packet::peekData</a></div><div class="ttdeci">const Ptr&lt; const Chunk &gt; peekData(int flags=0) const</div><div class="ttdoc">Returns the whole data part (excluding front and back popped parts) in the current representation.</div><div class="ttdef"><b>Definition:</b> Packet.h:266</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a9384a418719092ce561351e5cfa05fdd"><div class="ttname"><a href="classinet_1_1_l_mac.html#a9384a418719092ce561351e5cfa05fdd">inet::LMac::transmissionState</a></div><div class="ttdeci">physicallayer::IRadio::TransmissionState transmissionState</div><div class="ttdef"><b>Definition:</b> LMac.h:184</div></div>
<div class="ttc" id="anamespaceinet_html_a1f225ebf1ee6f6e7b4cc3e0d71a69f98af1f1fed5e183753ba8a2d42fba67dcf9"><div class="ttname"><a href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98af1f1fed5e183753ba8a2d42fba67dcf9">inet::LMAC_DATA</a></div><div class="ttdeci">@ LMAC_DATA</div><div class="ttdef"><b>Definition:</b> LMacHeader_m.h:75</div></div>
<div class="ttc" id="aclassinet_1_1_mac_protocol_base_html_af515de3b0818bdd09f430d46cdb00c5b"><div class="ttname"><a href="classinet_1_1_mac_protocol_base.html#af515de3b0818bdd09f430d46cdb00c5b">inet::MacProtocolBase::deleteCurrentTxFrame</a></div><div class="ttdeci">virtual void deleteCurrentTxFrame()</div><div class="ttdef"><b>Definition:</b> MacProtocolBase.cc:93</div></div>
<div class="ttc" id="aclassinet_1_1_mac_protocol_base_html_a49e24a6ab8658c73d1439b1ebe7af1b5"><div class="ttname"><a href="classinet_1_1_mac_protocol_base.html#a49e24a6ab8658c73d1439b1ebe7af1b5">inet::MacProtocolBase::initialize</a></div><div class="ttdeci">virtual void initialize(int stage) override</div><div class="ttdef"><b>Definition:</b> MacProtocolBase.cc:37</div></div>
<div class="ttc" id="anamespaceinet_html_a1f225ebf1ee6f6e7b4cc3e0d71a69f98ab551445f1b1455a3f956bac71d22043a"><div class="ttname"><a href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98ab551445f1b1455a3f956bac71d22043a">inet::LMAC_CHECK_CHANNEL</a></div><div class="ttdeci">@ LMAC_CHECK_CHANNEL</div><div class="ttdef"><b>Definition:</b> LMacHeader_m.h:73</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a93207d3fa68c5be1050098d3951fa901"><div class="ttname"><a href="classinet_1_1_l_mac.html#a93207d3fa68c5be1050098d3951fa901">inet::LMac::wakeup</a></div><div class="ttdeci">cMessage * wakeup</div><div class="ttdef"><b>Definition:</b> LMac.h:186</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_aa43e98b70518667832a3b7c57389b088"><div class="ttname"><a href="classinet_1_1_l_mac.html#aa43e98b70518667832a3b7c57389b088">inet::LMac::LMAC_FREE_SLOT</a></div><div class="ttdeci">static const MacAddress LMAC_FREE_SLOT</div><div class="ttdef"><b>Definition:</b> LMac.h:148</div></div>
<div class="ttc" id="aclassinet_1_1_mac_protocol_base_html_a5318e542573303f9d43d88d5d37d69d6"><div class="ttname"><a href="classinet_1_1_mac_protocol_base.html#a5318e542573303f9d43d88d5d37d69d6">inet::MacProtocolBase::getQueue</a></div><div class="ttdeci">queueing::IPacketQueue * getQueue(cGate *gate) const</div><div class="ttdef"><b>Definition:</b> MacProtocolBase.cc:157</div></div>
<div class="ttc" id="a_self_doc_8h_html_a8e54030c665b5254da268db865fccdfc"><div class="ttname"><a href="_self_doc_8h.html#a8e54030c665b5254da268db865fccdfc">Enter_Method</a></div><div class="ttdeci">#define Enter_Method(...)</div><div class="ttdef"><b>Definition:</b> SelfDoc.h:71</div></div>
<div class="ttc" id="aclassinet_1_1physicallayer_1_1_i_radio_html_ac7d3c2a56d709c5d038dc7dff4d97159"><div class="ttname"><a href="classinet_1_1physicallayer_1_1_i_radio.html#ac7d3c2a56d709c5d038dc7dff4d97159">inet::physicallayer::IRadio::TransmissionState</a></div><div class="ttdeci">TransmissionState</div><div class="ttdoc">This enumeration specifies the transmission state of the radio.</div><div class="ttdef"><b>Definition:</b> IRadio.h:155</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a5fd8bb0a4c396a0c5002ffd84cedd845"><div class="ttname"><a href="classinet_1_1_l_mac.html#a5fd8bb0a4c396a0c5002ffd84cedd845">inet::LMac::encapsulate</a></div><div class="ttdeci">virtual void encapsulate(Packet *)</div><div class="ttdoc">Encapsulate the NetwPkt into an MacPkt.</div><div class="ttdef"><b>Definition:</b> LMac.cc:619</div></div>
<div class="ttc" id="aclassinet_1_1_mac_protocol_base_html_af77a5b0d9ca1b84d81c20efb2180a500"><div class="ttname"><a href="classinet_1_1_mac_protocol_base.html#af77a5b0d9ca1b84d81c20efb2180a500">inet::MacProtocolBase::dequeuePacket</a></div><div class="ttdeci">virtual Packet * dequeuePacket()</div><div class="ttdef"><b>Definition:</b> MacProtocolBase.cc:175</div></div>
<div class="ttc" id="aclassinet_1_1physicallayer_1_1_i_radio_html_a8e9f8ba27cb8f145f4c80b0c2ef2d0ab"><div class="ttname"><a href="classinet_1_1physicallayer_1_1_i_radio.html#a8e9f8ba27cb8f145f4c80b0c2ef2d0ab">inet::physicallayer::IRadio::RadioMode</a></div><div class="ttdeci">RadioMode</div><div class="ttdoc">This enumeration specifies the requested operational mode of the radio.</div><div class="ttdef"><b>Definition:</b> IRadio.h:79</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_ab261282b797df23143e81ba5ef478b38a339bbb708ab398df5e2bebe58b82c2fc"><div class="ttname"><a href="classinet_1_1_l_mac.html#ab261282b797df23143e81ba5ef478b38a339bbb708ab398df5e2bebe58b82c2fc">inet::LMac::CCA</a></div><div class="ttdeci">@ CCA</div><div class="ttdef"><b>Definition:</b> LMac.h:143</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_afd5fd2ef6ddb92f412fd0165372d4f4b"><div class="ttname"><a href="classinet_1_1_l_mac.html#afd5fd2ef6ddb92f412fd0165372d4f4b">inet::LMac::occSlotsDirect</a></div><div class="ttdeci">MacAddress occSlotsDirect[64]</div><div class="ttdoc">Occupied slots from nodes, from which I hear directly.</div><div class="ttdef"><b>Definition:</b> LMac.h:176</div></div>
<div class="ttc" id="aclassinet_1_1_mac_protocol_base_html_ac2b8274ca4fce4b210b1c523927ad5a4"><div class="ttname"><a href="classinet_1_1_mac_protocol_base.html#ac2b8274ca4fce4b210b1c523927ad5a4">inet::MacProtocolBase::parseMacAddressParameter</a></div><div class="ttdeci">virtual MacAddress parseMacAddressParameter(const char *addrstr)</div><div class="ttdef"><b>Definition:</b> MacProtocolBase.cc:24</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a0b8a9ce1d762d556b6364790604fc68b"><div class="ttname"><a href="classinet_1_1_l_mac.html#a0b8a9ce1d762d556b6364790604fc68b">inet::LMac::mySlot</a></div><div class="ttdeci">int mySlot</div><div class="ttdoc">my slot ID</div><div class="ttdef"><b>Definition:</b> LMac.h:170</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a0c9573c25255ff2c2263d661c9ad4e0a"><div class="ttname"><a href="classinet_1_1_l_mac.html#a0c9573c25255ff2c2263d661c9ad4e0a">inet::LMac::numSlots</a></div><div class="ttdeci">int numSlots</div><div class="ttdoc">how many slots are there</div><div class="ttdef"><b>Definition:</b> LMac.h:172</div></div>
<div class="ttc" id="aclassinet_1_1_protocol_group_html_a40de7db32f5ec6281d6fa3b454335e22"><div class="ttname"><a href="classinet_1_1_protocol_group.html#a40de7db32f5ec6281d6fa3b454335e22">inet::ProtocolGroup::getProtocol</a></div><div class="ttdeci">const Protocol * getProtocol(int protocolNumber) const</div><div class="ttdef"><b>Definition:</b> ProtocolGroup.cc:31</div></div>
<div class="ttc" id="aclassinet_1_1_mac_protocol_base_html_a1f66409a3316782d68ab967eb1cff36a"><div class="ttname"><a href="classinet_1_1_mac_protocol_base.html#a1f66409a3316782d68ab967eb1cff36a">inet::MacProtocolBase::txQueue</a></div><div class="ttdeci">opp_component_ptr&lt; queueing::IPacketQueue &gt; txQueue</div><div class="ttdoc">Messages received from upper layer and to be transmitted later.</div><div class="ttdef"><b>Definition:</b> MacProtocolBase.h:38</div></div>
<div class="ttc" id="aclassinet_1_1physicallayer_1_1_i_radio_html_ac7d3c2a56d709c5d038dc7dff4d97159a9b8c95ba91ad3269b67014f4bfae83b2"><div class="ttname"><a href="classinet_1_1physicallayer_1_1_i_radio.html#ac7d3c2a56d709c5d038dc7dff4d97159a9b8c95ba91ad3269b67014f4bfae83b2">inet::physicallayer::IRadio::TRANSMISSION_STATE_UNDEFINED</a></div><div class="ttdeci">@ TRANSMISSION_STATE_UNDEFINED</div><div class="ttdoc">The transmission state is undefined or meaningless.</div><div class="ttdef"><b>Definition:</b> IRadio.h:160</div></div>
<div class="ttc" id="anamespaceinet_html_a1f225ebf1ee6f6e7b4cc3e0d71a69f98a6a1543ac9a41ac7ed5f523f46e2cc41f"><div class="ttname"><a href="namespaceinet.html#a1f225ebf1ee6f6e7b4cc3e0d71a69f98a6a1543ac9a41ac7ed5f523f46e2cc41f">inet::LMAC_SEND_DATA</a></div><div class="ttdeci">@ LMAC_SEND_DATA</div><div class="ttdef"><b>Definition:</b> LMacHeader_m.h:71</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_ac69fe9a1e6950931d169bd1f5746adfe"><div class="ttname"><a href="classinet_1_1_l_mac.html#ac69fe9a1e6950931d169bd1f5746adfe">inet::LMac::reservedMobileSlots</a></div><div class="ttdeci">int reservedMobileSlots</div><div class="ttdoc">The first couple of slots are reserved for nodes with special needs to avoid changing slots for them ...</div><div class="ttdef"><b>Definition:</b> LMac.h:180</div></div>
<div class="ttc" id="aclassinet_1_1physicallayer_1_1_i_radio_html_ac7d3c2a56d709c5d038dc7dff4d97159a6fcc91f18e6e2bb73ea00fbd734bb35a"><div class="ttname"><a href="classinet_1_1physicallayer_1_1_i_radio.html#ac7d3c2a56d709c5d038dc7dff4d97159a6fcc91f18e6e2bb73ea00fbd734bb35a">inet::physicallayer::IRadio::TRANSMISSION_STATE_IDLE</a></div><div class="ttdeci">@ TRANSMISSION_STATE_IDLE</div><div class="ttdoc">The radio is not transmitting a signal on the radio medium.</div><div class="ttdef"><b>Definition:</b> IRadio.h:166</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a683b18b11632f14f79b40e00373665a9"><div class="ttname"><a href="classinet_1_1_l_mac.html#a683b18b11632f14f79b40e00373665a9">inet::LMac::send_control</a></div><div class="ttdeci">cMessage * send_control</div><div class="ttdef"><b>Definition:</b> LMac.h:192</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_ac4b0ba3c11729879f585879380bb2917"><div class="ttname"><a href="classinet_1_1_l_mac.html#ac4b0ba3c11729879f585879380bb2917">inet::LMac::findNewSlot</a></div><div class="ttdeci">void findNewSlot()</div><div class="ttdoc">find a new slot</div><div class="ttdef"><b>Definition:</b> LMac.cc:578</div></div>
<div class="ttc" id="aclassinet_1_1_mac_protocol_base_html_a9521795aacedfaa68ec24fe46c948c32"><div class="ttname"><a href="classinet_1_1_mac_protocol_base.html#a9521795aacedfaa68ec24fe46c948c32">inet::MacProtocolBase::canDequeuePacket</a></div><div class="ttdeci">virtual bool canDequeuePacket() const</div><div class="ttdef"><b>Definition:</b> MacProtocolBase.cc:170</div></div>
<div class="ttc" id="anamespaceinet_html_a9c0ecf85d82481d6058caaee2e4a41d9a88c381fd51291e1e9ab716cf93d7a3a2"><div class="ttname"><a href="namespaceinet.html#a9c0ecf85d82481d6058caaee2e4a41d9a88c381fd51291e1e9ab716cf93d7a3a2">inet::NOT_ADDRESSED_TO_US</a></div><div class="ttdeci">@ NOT_ADDRESSED_TO_US</div><div class="ttdef"><b>Definition:</b> Simsignals_m.h:76</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a8e6bee0ad735aa6a73193043367d8e71"><div class="ttname"><a href="classinet_1_1_l_mac.html#a8e6bee0ad735aa6a73193043367d8e71">inet::LMac::controlDuration</a></div><div class="ttdeci">double controlDuration</div><div class="ttdoc">Duration of teh control time in each slot.</div><div class="ttdef"><b>Definition:</b> LMac.h:166</div></div>
<div class="ttc" id="anamespaceinet_html_ac59da13caae127564113d1343d890064"><div class="ttname"><a href="namespaceinet.html#ac59da13caae127564113d1343d890064">inet::INITSTAGE_LINK_LAYER</a></div><div class="ttdeci">INET_API InitStage INITSTAGE_LINK_LAYER</div><div class="ttdoc">Initialization of link-layer protocols.</div></div>
<div class="ttc" id="aclassinet_1_1_protocol_group_html_a59ecb79a79d2ff5f29477007d999822b"><div class="ttname"><a href="classinet_1_1_protocol_group.html#a59ecb79a79d2ff5f29477007d999822b">inet::ProtocolGroup::ethertype</a></div><div class="ttdeci">static ProtocolGroup ethertype</div><div class="ttdef"><b>Definition:</b> ProtocolGroup.h:40</div></div>
<div class="ttc" id="aclassinet_1_1physicallayer_1_1_i_radio_html_a483d8f7eef0ec6e315cecbf8dc1adb8f"><div class="ttname"><a href="classinet_1_1physicallayer_1_1_i_radio.html#a483d8f7eef0ec6e315cecbf8dc1adb8f">inet::physicallayer::IRadio::radioModeChangedSignal</a></div><div class="ttdeci">static simsignal_t radioModeChangedSignal</div><div class="ttdoc">This signal is emitted when the radio mode of the radio is changed.</div><div class="ttdef"><b>Definition:</b> IRadio.h:42</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a50659b070d103e512b0ae66dd04fa419"><div class="ttname"><a href="classinet_1_1_l_mac.html#a50659b070d103e512b0ae66dd04fa419">inet::LMac::myId</a></div><div class="ttdeci">int myId</div><div class="ttdoc">my ID</div><div class="ttdef"><b>Definition:</b> LMac.h:168</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a79b45d4d3072c97cba5acf99fc9043fd"><div class="ttname"><a href="classinet_1_1_l_mac.html#a79b45d4d3072c97cba5acf99fc9043fd">inet::LMac::handleSelfMessage</a></div><div class="ttdeci">virtual void handleSelfMessage(cMessage *) override</div><div class="ttdoc">Handle self messages such as timers.</div><div class="ttdef"><b>Definition:</b> LMac.cc:132</div></div>
<div class="ttc" id="aclassinet_1_1_l_mac_html_a066a6998a29eb65099f158d1c77ef35a"><div class="ttname"><a href="classinet_1_1_l_mac.html#a066a6998a29eb65099f158d1c77ef35a">inet::LMac::start_lmac</a></div><div class="ttdeci">cMessage * start_lmac</div><div class="ttdef"><b>Definition:</b> LMac.h:191</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceinet.html">inet</a></li><li class="navelem"><a class="el" href="classinet_1_1_l_mac.html">LMac</a></li>
    <li class="footer">Generated on Sun Apr 10 2022 21:00:23 for INET Framework for OMNeT++/OMNEST by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
