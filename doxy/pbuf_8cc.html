<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>INET Framework for OMNeT++/OMNEST: pbuf.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="opp.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">INET Framework for OMNeT++/OMNEST
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('pbuf_8cc.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pbuf.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="opt_8h.html">lwip/opt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="stats_8h.html">lwip/stats.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="def_8h.html">lwip/def.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mem_8h.html">lwip/mem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="memp_8h.html">lwip/memp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="pbuf_8h.html">lwip/pbuf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sys_8h.html">lwip/sys.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="perf_8h.html">arch/perf.h</a>&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceinet"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet.html">inet</a></td></tr>
<tr class="memdesc:namespaceinet"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copyright (c) 2005 Jan Ringoï¿½, www.ringos.cz. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceinet_1_1tcp"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html">inet::tcp</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8357a994e45ff94c9494aa55b6c3ecb3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbuf_8cc.html#a8357a994e45ff94c9494aa55b6c3ecb3">SIZEOF_STRUCT_PBUF</a>&#160;&#160;&#160;<a class="el" href="mem_8h.html#aef204be511fd32f681b55abc08e9ae18">LWIP_MEM_ALIGN_SIZE</a>(sizeof(struct pbuf))</td></tr>
<tr class="separator:a8357a994e45ff94c9494aa55b6c3ecb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dad81a8286ee8e9a7c70a74f9f4bb0f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbuf_8cc.html#a3dad81a8286ee8e9a7c70a74f9f4bb0f">PBUF_POOL_BUFSIZE_ALIGNED</a>&#160;&#160;&#160;<a class="el" href="mem_8h.html#aef204be511fd32f681b55abc08e9ae18">LWIP_MEM_ALIGN_SIZE</a>(<a class="el" href="opt_8h.html#ae61f4491d56e805e79b79eb5d35a00e5">PBUF_POOL_BUFSIZE</a>)</td></tr>
<tr class="separator:a3dad81a8286ee8e9a7c70a74f9f4bb0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed70c61e971683736c569a1a99b76569"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pbuf_8cc.html#aed70c61e971683736c569a1a99b76569">PBUF_POOL_IS_EMPTY</a>()</td></tr>
<tr class="separator:aed70c61e971683736c569a1a99b76569"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ade809b38d362260e0d04d8b2add7f0b1"><td class="memItemLeft" align="right" valign="top">struct pbuf *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html#ade809b38d362260e0d04d8b2add7f0b1">inet::tcp::pbuf_alloc</a> (pbuf_layer <a class="el" href="lwip__tcp_8txt.html#afab196a07edea843ed036d86a9283204">layer</a>, u16_t length, pbuf_type <a class="el" href="_i_udp-gates_8txt.html#a48fbb6195197e37d9387106612812aa0">type</a>)</td></tr>
<tr class="memdesc:ade809b38d362260e0d04d8b2add7f0b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a pbuf of the given type (possibly a chain for PBUF_POOL type).  <a href="namespaceinet_1_1tcp.html#ade809b38d362260e0d04d8b2add7f0b1">More...</a><br /></td></tr>
<tr class="separator:ade809b38d362260e0d04d8b2add7f0b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a975f73514b53221c097b9665c72dd2d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html#a975f73514b53221c097b9665c72dd2d7">inet::tcp::pbuf_realloc</a> (struct pbuf *p, u16_t new_len)</td></tr>
<tr class="memdesc:a975f73514b53221c097b9665c72dd2d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shrink a pbuf chain to a desired length.  <a href="namespaceinet_1_1tcp.html#a975f73514b53221c097b9665c72dd2d7">More...</a><br /></td></tr>
<tr class="separator:a975f73514b53221c097b9665c72dd2d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ae380a4c8195af5c6200cb98cc4461e"><td class="memItemLeft" align="right" valign="top">u8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html#a7ae380a4c8195af5c6200cb98cc4461e">inet::tcp::pbuf_header</a> (struct pbuf *p, s16_t header_size_increment)</td></tr>
<tr class="memdesc:a7ae380a4c8195af5c6200cb98cc4461e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjusts the payload pointer to hide or reveal headers in the payload.  <a href="namespaceinet_1_1tcp.html#a7ae380a4c8195af5c6200cb98cc4461e">More...</a><br /></td></tr>
<tr class="separator:a7ae380a4c8195af5c6200cb98cc4461e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab41af5f541077dba98b13048b5f5cdf"><td class="memItemLeft" align="right" valign="top">u8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html#aab41af5f541077dba98b13048b5f5cdf">inet::tcp::pbuf_free</a> (struct pbuf *p)</td></tr>
<tr class="memdesc:aab41af5f541077dba98b13048b5f5cdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dereference a pbuf chain or queue and deallocate any no-longer-used pbufs at the head of this chain or queue.  <a href="namespaceinet_1_1tcp.html#aab41af5f541077dba98b13048b5f5cdf">More...</a><br /></td></tr>
<tr class="separator:aab41af5f541077dba98b13048b5f5cdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea6734854edc380b4b5bd8ed0cc25390"><td class="memItemLeft" align="right" valign="top">u8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html#aea6734854edc380b4b5bd8ed0cc25390">inet::tcp::pbuf_clen</a> (struct pbuf *p)</td></tr>
<tr class="memdesc:aea6734854edc380b4b5bd8ed0cc25390"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count number of pbufs in a chain.  <a href="namespaceinet_1_1tcp.html#aea6734854edc380b4b5bd8ed0cc25390">More...</a><br /></td></tr>
<tr class="separator:aea6734854edc380b4b5bd8ed0cc25390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69eb6cb68843abe4dda370a34ca63248"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html#a69eb6cb68843abe4dda370a34ca63248">inet::tcp::pbuf_ref</a> (struct pbuf *p)</td></tr>
<tr class="memdesc:a69eb6cb68843abe4dda370a34ca63248"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increment the reference count of the pbuf.  <a href="namespaceinet_1_1tcp.html#a69eb6cb68843abe4dda370a34ca63248">More...</a><br /></td></tr>
<tr class="separator:a69eb6cb68843abe4dda370a34ca63248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada755bee61c738540ef1239887bd8b96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html#ada755bee61c738540ef1239887bd8b96">inet::tcp::pbuf_cat</a> (struct pbuf *h, struct pbuf *t)</td></tr>
<tr class="memdesc:ada755bee61c738540ef1239887bd8b96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Concatenate two pbufs (each may be a pbuf chain) and take over the caller's reference of the tail pbuf.  <a href="namespaceinet_1_1tcp.html#ada755bee61c738540ef1239887bd8b96">More...</a><br /></td></tr>
<tr class="separator:ada755bee61c738540ef1239887bd8b96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5904f83b9c967232729da26b2524e8fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html#a5904f83b9c967232729da26b2524e8fd">inet::tcp::pbuf_chain</a> (struct pbuf *h, struct pbuf *t)</td></tr>
<tr class="memdesc:a5904f83b9c967232729da26b2524e8fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chain two pbufs (or pbuf chains) together.  <a href="namespaceinet_1_1tcp.html#a5904f83b9c967232729da26b2524e8fd">More...</a><br /></td></tr>
<tr class="separator:a5904f83b9c967232729da26b2524e8fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add47c304bbcecdd4d2e6878a029ee459"><td class="memItemLeft" align="right" valign="top">struct pbuf *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html#add47c304bbcecdd4d2e6878a029ee459">inet::tcp::pbuf_dechain</a> (struct pbuf *p)</td></tr>
<tr class="memdesc:add47c304bbcecdd4d2e6878a029ee459"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dechains the first pbuf from its succeeding pbufs in the chain.  <a href="namespaceinet_1_1tcp.html#add47c304bbcecdd4d2e6878a029ee459">More...</a><br /></td></tr>
<tr class="separator:add47c304bbcecdd4d2e6878a029ee459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05010f8cf14cadbb53ebd412d072fdb1"><td class="memItemLeft" align="right" valign="top">err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html#a05010f8cf14cadbb53ebd412d072fdb1">inet::tcp::pbuf_copy</a> (struct pbuf *p_to, struct pbuf *p_from)</td></tr>
<tr class="memdesc:a05010f8cf14cadbb53ebd412d072fdb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create PBUF_RAM copies of pbufs.  <a href="namespaceinet_1_1tcp.html#a05010f8cf14cadbb53ebd412d072fdb1">More...</a><br /></td></tr>
<tr class="separator:a05010f8cf14cadbb53ebd412d072fdb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add0c706135774209e24fff1fa0b185c3"><td class="memItemLeft" align="right" valign="top">u16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html#add0c706135774209e24fff1fa0b185c3">inet::tcp::pbuf_copy_partial</a> (struct pbuf *buf, void *dataptr, u16_t len, u16_t offset)</td></tr>
<tr class="memdesc:add0c706135774209e24fff1fa0b185c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy (part of) the contents of a packet buffer to an application supplied buffer.  <a href="namespaceinet_1_1tcp.html#add0c706135774209e24fff1fa0b185c3">More...</a><br /></td></tr>
<tr class="separator:add0c706135774209e24fff1fa0b185c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a358e248edc24b3e3e2cfba7506b92993"><td class="memItemLeft" align="right" valign="top">err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html#a358e248edc24b3e3e2cfba7506b92993">inet::tcp::pbuf_take</a> (struct pbuf *buf, const void *dataptr, u16_t len)</td></tr>
<tr class="memdesc:a358e248edc24b3e3e2cfba7506b92993"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy application supplied data into a pbuf.  <a href="namespaceinet_1_1tcp.html#a358e248edc24b3e3e2cfba7506b92993">More...</a><br /></td></tr>
<tr class="separator:a358e248edc24b3e3e2cfba7506b92993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59fc3352e93fda2ad94d97432c0ddacd"><td class="memItemLeft" align="right" valign="top">struct pbuf *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinet_1_1tcp.html#a59fc3352e93fda2ad94d97432c0ddacd">inet::tcp::pbuf_coalesce</a> (struct pbuf *p, pbuf_layer <a class="el" href="lwip__tcp_8txt.html#afab196a07edea843ed036d86a9283204">layer</a>)</td></tr>
<tr class="memdesc:a59fc3352e93fda2ad94d97432c0ddacd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a single pbuf out of a queue of pbufs.  <a href="namespaceinet_1_1tcp.html#a59fc3352e93fda2ad94d97432c0ddacd">More...</a><br /></td></tr>
<tr class="separator:a59fc3352e93fda2ad94d97432c0ddacd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Packet buffer management</p>
<p>Packets are built from the pbuf data structure. It supports dynamic memory allocation for packet contents or can reference externally managed packet contents both in RAM and ROM. Quick allocation for incoming packets is provided through pools with fixed sized pbufs.</p>
<p>A packet may span over multiple pbufs, chained as a singly linked list. This is called a "pbuf chain".</p>
<p>Multiple packets may be queued, also using this singly linked list. This is called a "packet queue".</p>
<p>So, a packet queue consists of one or more pbuf chains, each of which consist of one or more pbufs. CURRENTLY, PACKET QUEUES ARE NOT SUPPORTED!!! Use helper structs to queue multiple packets.</p>
<p>The differences between a pbuf chain and a packet queue are very precise but subtle.</p>
<p>The last pbuf of a packet has a -&gt;tot_len field that equals the -&gt;len field. It can be found by traversing the list. If the last pbuf of a packet has a -&gt;next field other than nullptr, more packets are on the queue.</p>
<p>Therefore, looping through a pbuf of a single packet, has an loop end condition (tot_len == p-&gt;len), NOT (next == nullptr). </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a3dad81a8286ee8e9a7c70a74f9f4bb0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dad81a8286ee8e9a7c70a74f9f4bb0f">&#9670;&nbsp;</a></span>PBUF_POOL_BUFSIZE_ALIGNED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PBUF_POOL_BUFSIZE_ALIGNED&#160;&#160;&#160;<a class="el" href="mem_8h.html#aef204be511fd32f681b55abc08e9ae18">LWIP_MEM_ALIGN_SIZE</a>(<a class="el" href="opt_8h.html#ae61f4491d56e805e79b79eb5d35a00e5">PBUF_POOL_BUFSIZE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aed70c61e971683736c569a1a99b76569"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed70c61e971683736c569a1a99b76569">&#9670;&nbsp;</a></span>PBUF_POOL_IS_EMPTY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PBUF_POOL_IS_EMPTY</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8357a994e45ff94c9494aa55b6c3ecb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8357a994e45ff94c9494aa55b6c3ecb3">&#9670;&nbsp;</a></span>SIZEOF_STRUCT_PBUF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SIZEOF_STRUCT_PBUF&#160;&#160;&#160;<a class="el" href="mem_8h.html#aef204be511fd32f681b55abc08e9ae18">LWIP_MEM_ALIGN_SIZE</a>(sizeof(struct pbuf))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_f6b9a4655267a7addfa391e62c58cac5.html">inet</a></li><li class="navelem"><a class="el" href="dir_de665bde149509234459d534bc1a1080.html">transportlayer</a></li><li class="navelem"><a class="el" href="dir_08bcebfed1e89eebbcf95b8d1a6bd595.html">tcp_lwip</a></li><li class="navelem"><a class="el" href="dir_5369c9ee613dc691509ec3479a14b82d.html">lwip</a></li><li class="navelem"><a class="el" href="dir_c70658c5dd2535dbbd6f64ca57f13640.html">core</a></li><li class="navelem"><a class="el" href="pbuf_8cc.html">pbuf.cc</a></li>
    <li class="footer">Generated on Sun Apr 10 2022 21:00:14 for INET Framework for OMNeT++/OMNEST by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
